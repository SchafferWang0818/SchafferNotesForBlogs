---

title: Android之 OSI模型和TCP/IP模型
categories: "android 总结"
tags: 
	- TCP/IP
	- OSI

---

## OSI模型和TCP/IP模型
- TCP/IP包含很多协议,被认为是TCP/IP协议簇.
- OSI七层模型:**P**lease **d**o **n**ot **t**ell **s**tupid **p**eople **a**nything.

		===================================================================
		网络接口:
												*  物理层(Physical)
												*  数链层(DataLink)			
		===================================================================
		网络层:
												*  网络层(Network)
		===================================================================
		传输层:
												*  传输层(Transport)
		===================================================================
		应用层:
												*  表示层(Session)
												*  会话层(Presentation)
												*  应用层(Application)
		===================================================================




1. 物理层：主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是**传输比特流**（就是由1、0转化为电流强弱来进行传输,到达目的地后在转化为1、0，也就是我们常说的**数模转换与模数转换**）。这一层的数据叫做比特。
 　　
2. 数据链路层：定义了**格式化数据如何传输(定义在单个链路上如何传输数据)**，以及如何**控制对物理介质的访问**。这一层通常还提供**错误检测和纠正**，以确保数据的可靠传输。 　

3. 网络层：为在位于不同地理位置的网络中的**两个主机系统之间提供连接和路径选择**。
 　　
4. 传输层：定义了一些传输数据的协议和端口号（WWW端口80等），如：TCP（传输控制协议，传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据），UDP（用户数据报协议，与TCP特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如QQ聊天数据就是通过这种方式传输的）。 主要是**将从下层接收的数据进行分段和传输，到达目的地址后再进行重组。**常常把这一层数据叫做段。 
　　
5. 会话层：通过传输层（端口号：传输端口与接收端口）**建立数据传输的通路**。主要在你的系统之间发起会话或者接受会话请求（设备之间需要互相认识可以是IP也可以是MAC或者是主机名） 　　


6. 表示层：可确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取。例如，PC程序与另一台计算机进行通信，其中一台计算机使用扩展二一十进制交换码（EBCDIC），而另一台则使用美国信息交换标准码（ASCII）来表示相同的字符。如有必要，表示层会通过使用一种通格式来**实现多种数据格式之间的转换。** 　
　
7. 应用层： 是最靠近用户的OSI层。这一层**为用户的应用程序（例如电子邮件、文件传输和终端仿真）提供网络服务。**
---

## TCP连接
* 手机底层实现了TCP/IP协议，可以使手机终端通过无线网络建立TCP连接。TCP协议可以对上层网络提供接口，使上层网络数据的传输建立在“无差别”的网络之上。
* 连接需要三次握手

		1. 客户端发送syn包(syn=j)到服务器，并进入SYN_SEND状态，等待服务器确认；
		2. 服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；
		3. 客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=k+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。

		* 注:握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。理想状态下，TCP连接一旦建立，在通信双方中的任何一方主动关闭连接之前，TCP 连接都将被一直保持下去

* 断开连接需要四次握手


---