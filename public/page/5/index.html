<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">
<meta property="og:type" content="website">
<meta property="og:title" content="SchafferWang&#39;s blogs">
<meta property="og:url" content="http://SchafferWang0818.github.io/page/5/index.html">
<meta property="og:site_name" content="SchafferWang&#39;s blogs">
<meta property="og:description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SchafferWang&#39;s blogs">
<meta name="twitter:description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://SchafferWang0818.github.io/page/5/"/>





  <title>SchafferWang's blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SchafferWang's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Writed by SchafferWang</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之插件化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之插件化/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——NavigationView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——NavigationView/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——Material Design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——Material Design/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——Dialog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——Dialog/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——外部存储/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——外部存储/" itemprop="url">Android之 外部存储</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="外部存储"><a href="#外部存储" class="headerlink" title="外部存储"></a>外部存储</h1><p><img src="https://i.imgur.com/C9ggy4K.jpg" alt="存储方式"></p>
<font color="blue"><br><strong>外部存储包括私有目录和公有目录.<br>私有目录有包名存在.<br>公有目录使用<code>Environment</code>获取</strong></font>

<p>外部存储存储权限如下: </p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;
</code></pre><hr>
<h3 id="存储路径和使用方式"><a href="#存储路径和使用方式" class="headerlink" title=" 存储路径和使用方式 "></a><font color="red"> 存储路径和使用方式 </font></h3><ul>
<li>公有目录</li>
</ul>
<pre><code>Environment.getRootDirectory()
        -&gt;    /system
        //    Android的根目录

Environment.getDataDirectory()
        -&gt;    /data    
        //    用户数据目录

Environment.getDownloadCacheDirectory()
        -&gt;    /data/cache 
        //    下载缓存目录

Environment.getExternalStorageDirectory()
        -&gt;    /storage/emulated/0
        //    主要的外部存储目录        需要使用Environment.getExternalStorageState()判断状态.

Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_ALARMS)            
        -&gt;    /storage/emulated/0/Alarms
</code></pre><ul>
<li>私有目录,<font color="red"><strong>清理数据和缓存的路径,应用被卸载时清理,也可自己手动清理</strong> </font></li>
</ul>
<pre><code>- context.getExternalCacheDir()
        -&gt;/storage/emulated/0/Android/data/packageName/cache

- context.getExternalFilesDir(Environment.DIRECTORY_ALARMS)
        -&gt;/storage/emulated/0/Android/data/packageName/files/Alarms
</code></pre><hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结:"></a><font color="red">总结:</font></h3><pre><code>1. 内部存储和外部存储都存在路径让其他应用读取;
2. 内部存储/data/user/0/包名/** 或 data/data/包名/ **
3. 外部存储文件存储都是要精确到文件夹的;
4. 外部存储存储在外部sdCard中,使用上下文得到的是私有的,也是常清理的位置;



    showLog(&quot;Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_ALARMS)-&gt;&quot;+ Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_ALARMS).getAbsolutePath());
    showLog(&quot;Environment.getDownloadCacheDirectory()-&gt;&quot;+Environment.getDownloadCacheDirectory().getAbsolutePath());
    showLog(&quot;Environment.getDataDirectory()-&gt;&quot;+Environment.getDataDirectory().getAbsolutePath());
    showLog(&quot;Environment.getExternalStorageDirectory()-&gt;&quot;+Environment.getExternalStorageDirectory().getAbsolutePath());
    showLog(&quot;Environment.getRootDirectory()-&gt;&quot;+ Environment.getRootDirectory().getAbsolutePath());
    showLog(&quot;getExternalCacheDir()-&gt;&quot;+getExternalCacheDir().getAbsolutePath());
    showLog(&quot;getExternalFilesDir(Environment.DIRECTORY_ALARMS)-&gt;&quot;+getExternalFilesDir(Environment.DIRECTORY_ALARMS).getAbsolutePath());
    showLog(&quot;内部存储-&gt;&quot;+getCacheDir().getAbsolutePath());
    showLog(&quot;内部存储-&gt;&quot;+getFilesDir().getAbsolutePath());
    Environment.getExternalStorageState();
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——内部存储/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——内部存储/" itemprop="url">Android之 内部存储</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="内部存储"><a href="#内部存储" class="headerlink" title="内部存储"></a>内部存储</h1><p><img src="https://i.imgur.com/C9ggy4K.jpg" alt="存储方式"></p>
<h3 id="描述-amp-注意事项"><a href="#描述-amp-注意事项" class="headerlink" title=" 描述&amp;注意事项 "></a><font color="red"> 描述&amp;注意事项 </font></h3><ul>
<li>内部存储是只有当前应用可以访问到的存储方式,SP有能被外部访问的模式;</li>
<li>应用卸载后内部存储内容都将被删除;</li>
<li>包括<code>sharedPreferences</code>,<code>SQLite</code>;</li>
</ul>
<h3 id="路径"><a href="#路径" class="headerlink" title=" 路径 "></a><font color="red"> 路径 </font></h3><pre><code>- /data/app:                             存放着所有安装的app的apk文件

- /data/data/包名/shared_prefs                 APP的SP信息
- /data/data/包名/databases                     APP的数据库信息
- /data/data/包名/files                        APP的文件信息
- /data/data/包名/cache                         APP的缓存信息
</code></pre><p>注意: 没有root的手机不能打开内部存储的文件夹;</p>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title=" 使用方式 "></a><font color="red"> 使用方式 </font></h3><pre><code>内部存储的文件存储位置:    context.getFileDir();
内部存储的缓存存储位置:    context.getCacheDir();
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——缓存与LruCache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——缓存与LruCache/" itemprop="url">Android之 缓存与LruCache</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="缓存与LruCache"><a href="#缓存与LruCache" class="headerlink" title="缓存与LruCache"></a>缓存与LruCache</h1><ul>
<li>参考:<ul>
<li><a href="https://mp.weixin.qq.com/s/Zf7YHmoD0mM4RMvsHc5EAw" target="_blank" rel="noopener"> <strong>Android LruCache源码分析，图片缓存算法的实现原理</strong> </a></li>
<li><a href="https://www.cnblogs.com/liuling/archive/2015/09/24/2015-9-24-1.html" target="_blank" rel="noopener"> <strong>内存缓存LruCache实现原理</strong> </a></li>
<li>《 Android 代码艺术探索 》</li>
</ul>
</li>
</ul>
<hr>
<h2 id="LruCache-Least-Recently-Used-Cache-与-LinkedHashMap"><a href="#LruCache-Least-Recently-Used-Cache-与-LinkedHashMap" class="headerlink" title="LruCache(Least Recently Used Cache) 与 LinkedHashMap"></a><code>LruCache(Least Recently Used Cache)</code> 与 <code>LinkedHashMap</code></h2><h3 id="LruCache"><a href="#LruCache" class="headerlink" title="LruCache"></a>LruCache</h3><blockquote>
<p><strong><font color="red">内存缓存规定大小</font>快满时,淘汰<font color="red">近期最少使用</font>的缓存目标.</strong></p>
</blockquote>
<blockquote>
<font color="BlueViolet" size="3"><br><strong><code>LruCache</code> 效果关键在于<code>this.map = new LinkedHashMap&lt;K, V&gt;(0, 0.75f, true)</code>中的true按照存取顺序排序。</strong><br><strong>当在<code>LruCache</code>中放入元素时,元素依次放入链表后侧。</strong><br><strong>当访问过其中一个元素时,元素移除并放入链表后侧。</strong><br><strong>当内存缓存达到设定的最大值时，将链表头部的对象（近期最少用到的）移除。</strong><br></font>
</blockquote>
<ul>
<li>抽象 / 空实现函数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * evicted : = true时是为了腾出空间而调用, = false 时是 put() 或 remove() 中手动调用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">entryRemoved</span><span class="params">(<span class="keyword">boolean</span> evicted, K key, V oldValue, V newValue)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * safeSizeOf( K key , V value ) 内部调用,计算当前节点的大小</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">sizeOf</span><span class="params">(K key, V value)</span> </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取不到 value 时的创建流程</span></span><br><span class="line"><span class="comment"> */</span>	</span><br><span class="line"><span class="function"><span class="keyword">protected</span> V <span class="title">create</span><span class="params">(K key)</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">null</span>; &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>put(K key , V value)</code></li>
</ul>
<p><img src="https://i.imgur.com/a4OiomD.jpg" alt="https://i.imgur.com/a4OiomD.jpg"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Caches &#123;<span class="doctag">@code</span> value&#125; for &#123;<span class="doctag">@code</span> key&#125;. The value is moved to the head of</span></span><br><span class="line"><span class="comment"> * the queue.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the previous value mapped by &#123;<span class="doctag">@code</span> key&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span> || value == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"key == null || value == null"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    V previous;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">        putCount++;</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	计算当前存入节点的大小,并加入到使用的总缓存的大小</span></span><br><span class="line">        size += safeSizeOf(key, value);</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	存入map时若已经存在同key的value,则返回之前的值.</span></span><br><span class="line">        previous = map.put(key, value);</span><br><span class="line">        <span class="keyword">if</span> (previous != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	计算之前节点的大小,然后从总缓存删除</span></span><br><span class="line">            size -= safeSizeOf(key, previous);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (previous != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="comment">//&gt;&gt;&gt;	有旧值移除 回调 空实现entryRemoved()</span></span><br><span class="line">        entryRemoved(<span class="keyword">false</span>, key, previous, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//&gt;&gt;&gt;	整理总缓存大小,判断是否超过规定的最大值</span></span><br><span class="line">    trimToSize(maxSize);</span><br><span class="line">    <span class="keyword">return</span> previous;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>get(K key)</code><br><img src="https://i.imgur.com/esN87Z5.jpg" alt="https://i.imgur.com/esN87Z5.jpg"></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the value for &#123;<span class="doctag">@code</span> key&#125; if it exists in the cache or can be</span></span><br><span class="line"><span class="comment"> * created by &#123;<span class="doctag">@code</span> #create&#125;. If a value was returned, it is moved to the</span></span><br><span class="line"><span class="comment"> * head of the queue. This returns null if a value is not cached and cannot</span></span><br><span class="line"><span class="comment"> * be created.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"key == null"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    V mapValue;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	调用LinkedHashMap 的get方法</span></span><br><span class="line">        mapValue = map.get(key);</span><br><span class="line">        <span class="keyword">if</span> (mapValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">            hitCount++;</span><br><span class="line">            <span class="keyword">return</span> mapValue;</span><br><span class="line">        &#125;</span><br><span class="line">        missCount++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//&gt;&gt;&gt;	获取不到就创建</span></span><br><span class="line">    V createdValue = create(key);</span><br><span class="line">    <span class="keyword">if</span> (createdValue == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">        createCount++;</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	存入map时若已经存在同key的value，将原来键为key的对象保存到mapValue</span></span><br><span class="line">        mapValue = map.put(key, createdValue);</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	刚创建了新值的情况下没有历史值,mapValue = null</span></span><br><span class="line">        <span class="keyword">if</span> (mapValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//&gt;&gt;&gt;	如果mapValue不为空，则撤销上一步的put操作。</span></span><br><span class="line">            map.put(key, mapValue);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        	<span class="comment">//&gt;&gt;&gt;	加入新创建的对象之后计算大小</span></span><br><span class="line">            size += safeSizeOf(key, createdValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//锁定操作结束</span></span><br><span class="line">		</span><br><span class="line">    <span class="keyword">if</span> (mapValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">    	<span class="comment">//&gt;&gt;&gt;	回调</span></span><br><span class="line">        entryRemoved(<span class="keyword">false</span>, key, createdValue, mapValue);</span><br><span class="line">        <span class="keyword">return</span> mapValue;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	每次新加入对象都需要调用trimToSize方法看是否需要回收</span></span><br><span class="line">        trimToSize(maxSize);</span><br><span class="line">        <span class="keyword">return</span> createdValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 移除最久未使用的内容 , 直到使缓存总量小于规定的最大值</span></span><br><span class="line"><span class="comment"> * 如果maxSize传入-1，则清空缓存中的所有对象</span></span><br><span class="line"><span class="comment"> * Remove the eldest entries until the total of remaining entries is at or</span></span><br><span class="line"><span class="comment"> * below the requested size.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> maxSize the maximum size of the cache before returning. May be -1</span></span><br><span class="line"><span class="comment"> *            to evict even 0-sized elements.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">trimToSize</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        K key;</span><br><span class="line">        V value;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (size &lt; <span class="number">0</span> || (map.isEmpty() &amp;&amp; size != <span class="number">0</span>)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(getClass().getName()</span><br><span class="line">                        + <span class="string">".sizeOf() is reporting inconsistent results!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//&gt;&gt;&gt;	如果当前size小于maxSize或者map没有任何对象,则结束循环</span></span><br><span class="line">            <span class="keyword">if</span> (size &lt;= maxSize) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Map.Entry&lt;K, V&gt; toEvict = map.eldest();</span><br><span class="line">            <span class="keyword">if</span> (toEvict == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//&gt;&gt;&gt;	移除链表头部的元素，并进入下一次循环</span></span><br><span class="line">            key = toEvict.getKey();</span><br><span class="line">            value = toEvict.getValue();</span><br><span class="line">            map.remove(key);</span><br><span class="line">            size -= safeSizeOf(key, value);</span><br><span class="line">            evictionCount++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	腾出空间而回调</span></span><br><span class="line">        entryRemoved(<span class="keyword">true</span>, key, value, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>remove(K key)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Removes the entry for &#123;<span class="doctag">@code</span> key&#125; if it exists.</span></span><br><span class="line"><span class="comment"> * 从内存缓存中根据key值移除某个对象并返回该对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the previous value mapped by &#123;<span class="doctag">@code</span> key&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">remove</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"key == null"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    V previous;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">    	<span class="comment">//&gt;&gt;&gt;	从map中移除value</span></span><br><span class="line">        previous = map.remove(key);</span><br><span class="line">        <span class="keyword">if</span> (previous != <span class="keyword">null</span>) &#123;</span><br><span class="line">            size -= safeSizeOf(key, previous);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (previous != <span class="keyword">null</span>) &#123;</span><br><span class="line">    	<span class="comment">//&gt;&gt;&gt;	回调</span></span><br><span class="line">        entryRemoved(<span class="keyword">false</span>, key, previous, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> previous;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="LinkedHashMap-的使用"><a href="#LinkedHashMap-的使用" class="headerlink" title="LinkedHashMap 的使用"></a><code>LinkedHashMap</code> 的使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs an empty &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance with the</span></span><br><span class="line"><span class="comment"> * specified initial capacity, load factor and ordering mode.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  initialCapacity 初始容量</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  loadFactor      负载因子</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  accessOrder    true = 存取顺序 , false = 插入顺序 , 默认 false</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException if the initial capacity is negative</span></span><br><span class="line"><span class="comment"> *         or the load factor is nonpositive</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> accessOrder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(initialCapacity, loadFactor);</span><br><span class="line">    <span class="keyword">this</span>.accessOrder = accessOrder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>get()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">       LinkedHashMapEntry&lt;K,V&gt; e = (LinkedHashMapEntry&lt;K,V&gt;)getEntry(key);</span><br><span class="line">       <span class="keyword">if</span> (e == <span class="keyword">null</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">       <span class="keyword">return</span> e.value;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	LinkedHashMap $ LinkedHashMapEntry </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">recordAccess</span><span class="params">(HashMap&lt;K,V&gt; m)</span> </span>&#123;</span><br><span class="line">	LinkedHashMap&lt;K,V&gt; lm = (LinkedHashMap&lt;K,V&gt;)m;</span><br><span class="line">	<span class="comment">//&gt;&gt;&gt;	存取顺序时</span></span><br><span class="line">	<span class="keyword">if</span> (lm.accessOrder) &#123;</span><br><span class="line">		lm.modCount++;</span><br><span class="line">		<span class="comment">//&gt;&gt;&gt;	将自身节点从链表中移除</span></span><br><span class="line">		remove();</span><br><span class="line">		<span class="comment">//&gt;&gt;&gt;	将自身节点添加到链表首节点</span></span><br><span class="line">		addBefore(lm.header);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>put()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (table == EMPTY_TABLE) &#123; </span><br><span class="line">            inflateTable(threshold); </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (key == <span class="keyword">null</span>)  <span class="comment">//&gt;&gt;&gt;	HashMap的特点 可以放key为null的值 </span></span><br><span class="line">            <span class="keyword">return</span> putForNullKey(value); </span><br><span class="line">        <span class="keyword">int</span> hash = sun.misc.Hashing.singleWordWangJenkinsHash(key); </span><br><span class="line">        <span class="keyword">int</span> i = indexFor(hash, table.length); </span><br><span class="line">        <span class="keyword">for</span> (HashMapEntry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123; </span><br><span class="line">            Object k; </span><br><span class="line">            <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; </span><br><span class="line">            	<span class="comment">//&gt;&gt;&gt;	替换原值出来</span></span><br><span class="line">                V oldValue = e.value; </span><br><span class="line">                e.value = value; </span><br><span class="line">                e.recordAccess(<span class="keyword">this</span>); </span><br><span class="line">                <span class="comment">//&gt;&gt;&gt;	存在旧值 就把旧值移除掉 并返回旧值  由此可知 当我们更换缓存中已存在的值时，并不会影响它在链表中位置 </span></span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        modCount++; </span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	LinkedHashMap 重写了该方法 </span></span><br><span class="line">        addEntry(hash, key, value, i);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>; </span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">   <span class="comment">//LinkedHashMap # addEntry()   </span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123; </span><br><span class="line"> </span><br><span class="line">        LinkedHashMapEntry&lt;K,V&gt; eldest = header.after; </span><br><span class="line">        <span class="keyword">if</span> (eldest != header) &#123; </span><br><span class="line">            <span class="keyword">boolean</span> removeEldest; </span><br><span class="line">            size++; </span><br><span class="line">            <span class="keyword">try</span> &#123; </span><br><span class="line">                <span class="comment">//&gt;&gt;&gt;	hook  默认为false 让用户重写removeEldestEntry 来决定是否移除eldest节点 </span></span><br><span class="line">                removeEldest = removeEldestEntry(eldest);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123; </span><br><span class="line">                size--; </span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">if</span> (removeEldest) &#123; </span><br><span class="line">                removeEntryForKey(eldest.key); </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.addEntry(hash, key, value, bucketIndex);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry&lt;K,V&gt; eldest)</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">false</span>;  &#125; </span><br><span class="line">  </span><br><span class="line">   <span class="comment">//HashMap # addEntry()</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="keyword">null</span> != table[bucketIndex])) &#123; </span><br><span class="line">            resize(<span class="number">2</span> * table.length); </span><br><span class="line">            hash = (<span class="keyword">null</span> != key) ? sun.misc.Hashing.singleWordWangJenkinsHash(key) : <span class="number">0</span>; </span><br><span class="line">            bucketIndex = indexFor(hash, table.length); </span><br><span class="line">        &#125; </span><br><span class="line">         <span class="comment">//&gt;&gt;&gt;	LinkedHashMap重写了该方法 </span></span><br><span class="line">        createEntry(hash, key, value, bucketIndex); </span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">//LinkedHashMap # createEntry() </span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123; </span><br><span class="line">        HashMapEntry&lt;K,V&gt; old = table[bucketIndex]; </span><br><span class="line">        LinkedHashMapEntry&lt;K,V&gt; e = <span class="keyword">new</span> LinkedHashMapEntry&lt;&gt;(hash, key, value, old); </span><br><span class="line">        table[bucketIndex] = e; </span><br><span class="line">        <span class="comment">//&gt;&gt;&gt;	把该节点插入到链表头部 最近使用访问到的在最前边原则 </span></span><br><span class="line">        e.addBefore(header);  </span><br><span class="line">        size++; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><blockquote>
<p><strong>包括内存缓存和磁盘缓存.</strong></p>
</blockquote>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——Fragment,RecyclerView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——Fragment,RecyclerView/" itemprop="url">Android之 Fragment & RecyclerView</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><ul>
<li>为防止出现<code>has parent view</code>的情况,在check事件中<code>frameGroup.removeAllViews();</code></li>
</ul>
<h3 id="FragmentStatePagerAdapter-与-FragmentPagerAdapter"><a href="#FragmentStatePagerAdapter-与-FragmentPagerAdapter" class="headerlink" title="FragmentStatePagerAdapter 与 FragmentPagerAdapter"></a>FragmentStatePagerAdapter 与 FragmentPagerAdapter</h3><ul>
<li>相同点: 都继承自<code>PagerAdapter</code>,<code>instantiateItem()</code>和<code>setPrimaryItem()</code>中均调用了<code>Fragment # setUserVisibleHint(boolean)</code>设置是否可见,用于懒加载</li>
<li>不同点:<ul>
<li><code>FragmentStatePagerAdapter</code>中全局设置<code>SavedState</code>列表,用于保存所有<code>Fragment</code>的状态,在<code>instantiateItem()</code>和<code>destroyItem()</code>均有状态更新,而后者没有;</li>
<li>前者不论Fragment存不存在均调用<code>FragmentTransaction#add/remove()</code>,<br>后者判断Fragment存在时调用<code>FragmentTransaction#attach()</code>,不存在时调用<code>FragmentTransaction#detach()</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a>RecyclerView</h2><hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——PopupWindow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——PopupWindow/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="PopupWindow"><a href="#PopupWindow" class="headerlink" title="PopupWindow"></a>PopupWindow</h1><hr>
<pre><code>细节:
    1. popupWindow内容中的EditText因window层级高而不能弹出粘贴复制菜单;
</code></pre><hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——Notification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——Notification/" itemprop="url">Android之 Notification & RemoteViews & PendingIntent</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Notification-amp-RemoteViews"><a href="#Notification-amp-RemoteViews" class="headerlink" title="Notification &amp; RemoteViews"></a>Notification &amp; RemoteViews</h1><font color="red"><strong> <code>Notification</code> 与 <code>AppwidgetProvider</code>桌面控件 均运行在<code>SystemServer</code>进程中.</strong></font>

<hr>
<h3 id="1-PendingIntent"><a href="#1-PendingIntent" class="headerlink" title="1. PendingIntent"></a>1. PendingIntent</h3><table>
<thead>
<tr>
<th>PendingIntent.Flag</th>
<th>Define</th>
</tr>
</thead>
<tbody>
<tr>
<td>FLAG_CANCEL_CURRENT</td>
<td>如果要创建的PI<strong>已经</strong>存在，<strong>重新创建</strong>之前，已存PI中的<strong>intent将不能使用 → 之前通知点击无法打开</strong></td>
</tr>
<tr>
<td>FLAG_NO_CREATE</td>
<td>如果要创建的PI<strong>尚未</strong>存在，<strong>不创建而直接返回null，不单独使用</strong></td>
</tr>
<tr>
<td>FLAG_ONE_SHOT</td>
<td>相同的PI<strong>只能使用一次</strong>，存在相同的PI时<strong>不会更新，后续通知点击无法打开</strong></td>
</tr>
<tr>
<td>FLAG_UPDATE_CURRENT</td>
<td><font color="red"><strong>相同 → 保留 → 替换原extra</strong></font></td>
</tr>
</tbody>
</table>
<pre><code>注: 
    1. 判断PI是否相等的依据:
        1. Intent是否&quot;相同&quot;(相同的components和intent-filter(action、data、categories、type和flags));
        2. requestCode是否一致;
</code></pre><hr>
<h3 id="2-RemoteViews"><a href="#2-RemoteViews" class="headerlink" title="2. RemoteViews"></a>2. RemoteViews</h3><ol>
<li><p>支持并设置View</p>
<pre><code>Layout:
    FrameLayout,LinearLayout,RelativeLayout,GridLayout
View:
    TextView,Button,ImageButton,ImageView,ProgressBar,
    ViewFlipper,ListView,GridView,ViewStub,
    AnalogClock,Chronometer,StackView,AdapterViewFlipper
</code></pre><p> 除了TextView,ImageView之外,可反射设置其他属性</p>
<pre><code>setInt/Long/Boolean(int,methodName,value)
</code></pre></li>
<li><font color="green"><strong>内部机制</strong><br><br> 1. <strong><code>RemoteViews</code>被应用于通知和桌面小部件,分别使用<code>NotificationManager(NM)</code>和<code>AppWidgetManager(AWM)</code>进行管理,分别在<code>(SystemServer中的)NotificationManagerService(NMS)</code>和<code>AppWidgetService(AWS)</code>中加载;</strong><br><br> 2. <strong>封装好的设置View的方法内部调用<code>setAction()</code>将View操作作为Action操作对象,之后会被跨进程传输到远程进程;</strong><br><br> 3. <strong>所有Action存储到<code>RemoteViews</code>的<code>mActions[ArrayList类型]</code>中;</strong><br><br> 4. <strong>所有Action并没有立即更新界面,在<code>NM # notify()</code>和<code>AWM # updateAppwidget()</code>中 调用 <code>RemoteViews # apply/reApply()</code>来加载或更新布局;</strong>    </font>


</li>
</ol>
<ol>
<li><p>IPC操作中两个应用进程的资源id不相同<strong>可以使用id名称进行加载;</strong></p>
<pre><code>int layoutId = getResources().getIdentifier(&quot;layout_name&quot;,&quot;layout&quot;,getPackageName());
//相当于获得了R.layout.layout_name的id
View view = getLayoutInflater().inflate(layoutId,mRemoteViewsContent,false);
remoteViews.reapply(this,view);
//mRemoteViewsContent.addView(view);
</code></pre></li>
</ol>
<hr>
<h3 id="3-Notification"><a href="#3-Notification" class="headerlink" title="3. Notification"></a>3. Notification</h3><p><font color="red"><strong>Notification使用NotificationManger创建.</strong></font></p>
<ol>
<li>Flags</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">Flags</th>
<th style="text-align:left">define</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">FLAG_SHOW_LIGHTS</td>
<td style="text-align:left">三色灯提醒</td>
</tr>
<tr>
<td style="text-align:left">FLAG_ONGOING_EVENT</td>
<td style="text-align:left">发起正在运行事件（活动中）</td>
</tr>
<tr>
<td style="text-align:left">FLAG_INSISTENT</td>
<td style="text-align:left">声音振动无限循环，直到响应 （取消或者打开）</td>
</tr>
<tr>
<td style="text-align:left">FLAG_ONLY_ALERT_ONCE</td>
<td style="text-align:left">铃声和震动均只执行一次</td>
</tr>
<tr>
<td style="text-align:left">FLAG_AUTO_CANCEL</td>
<td style="text-align:left">点击自动消失</td>
</tr>
<tr>
<td style="text-align:left">FLAG_NO_CLEAR</td>
<td style="text-align:left">只有全部清除时才会清除 </td>
</tr>
<tr>
<td style="text-align:left">FLAG_FOREGROUND_SERVICE</td>
<td style="text-align:left">表示正在运行的服务</td>
</tr>
</tbody>
</table>
<p>2.Default</p>
<table>
<thead>
<tr>
<th style="text-align:left">default</th>
<th style="text-align:left">define</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">DEFAULT_VIBRATE</td>
<td style="text-align:left">添加默认震动提醒 需要 VIBRATE permission</td>
</tr>
<tr>
<td style="text-align:left">DEFAULT_SOUND</td>
<td style="text-align:left">添加默认声音提醒</td>
</tr>
<tr>
<td style="text-align:left">DEFAULT_LIGHTS</td>
<td style="text-align:left">添加默认三色灯提醒</td>
</tr>
<tr>
<td style="text-align:left">DEFAULT_ALL</td>
<td style="text-align:left">添加默认以上3种全部提醒</td>
</tr>
</tbody>
</table>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4"
                alt="SchafferWang" />
            
              <p class="site-author-name" itemprop="name">SchafferWang</p>
              <p class="site-description motion-element" itemprop="description">我要一步一步往上爬，<br>只待阳光静静看着它的脸，<br>小小的天有大大的梦想，<br>重重的壳裹着轻轻的仰望。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">89</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">79</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/SchafferWang0818" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/5055805571/profile?topnav=1&wvr=6" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-globe"></i>Weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/schaffer.me/activities" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-globe"></i>ZhiHu</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SchafferWang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
