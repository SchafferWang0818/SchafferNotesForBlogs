<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">
<meta property="og:type" content="website">
<meta property="og:title" content="SchafferWang&#39;s blogs">
<meta property="og:url" content="http://SchafferWang0818.github.io/page/6/index.html">
<meta property="og:site_name" content="SchafferWang&#39;s blogs">
<meta property="og:description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SchafferWang&#39;s blogs">
<meta name="twitter:description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://SchafferWang0818.github.io/page/6/"/>





  <title>SchafferWang's blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SchafferWang's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Writed by SchafferWang</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之显示——Menu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之显示——Menu/" itemprop="url">Android之 Menu</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h1><pre><code>分类:
    - OptionsMenu
    - SubMenu
    - PopupMenu &amp; PopupWindow
    - ContextMenu 
</code></pre><hr>
<font color="red"><br>    <strong>注意:</strong><br>    <font color="Blue"><br>            1. <strong><code>OptionsMenu</code>,<code>ContextMenu</code>均可以设置<code>SubMenu</code>;</strong><br>            2. <strong><code>ContextMenu</code>,<code>PopupMenu</code> 围绕<code>View</code>进行;</strong><br>            3. <strong><code>ContextMenu</code>需要注册和解注册;</strong><br><br>    </font><br></font>

<hr>
<h2 id="OptionsMenu-物理菜单按钮触发的菜单"><a href="#OptionsMenu-物理菜单按钮触发的菜单" class="headerlink" title="OptionsMenu(物理菜单按钮触发的菜单)"></a>OptionsMenu(物理菜单按钮触发的菜单)</h2><ol>
<li>旧版本(4.4之前)中最多呈现的item数量为6,其他item为more后;新版本中显示为一个list(即ActionBar);</li>
<li>创建的方法为onCreateOptionsMenu(),可以用Java代码直接添加item,也可以填充menu.xml文件来完成.</li>
<li>item选中的动作设置需要调用onOptionsItemSelected()完成.</li>
<li><p>实现步骤:</p>
<pre><code>1. onCreateOptionsMenu()中

        menu.add(Menu.NONE, 1, Menu.NONE, &quot;设置1&quot;).setIcon(R.drawable.ic_launcher);
        menu.add(Menu.NONE, 2, Menu.NONE, &quot;设置2&quot;);
        menu.add(Menu.NONE, 3, Menu.NONE, &quot;设置3&quot;);
        //参数一：groupId  组id  int 类型  表示添加的item可以分组进行管理。如果不需要分组可以不使用
        //参数二： itemId  每一个item的id值。 int类型。 非常重要。 用来找到对应的item
        //参数三：item的排序。 int类型。如果使用none表示按照默认排序
        //参数四：item上显示的内容

2. onOptionsItemSelected()中使用Switch分支结构对menu的点击情况进行判断.
</code></pre></li>
</ol>
<hr>
<h2 id="SubMenu-其他菜单子菜单"><a href="#SubMenu-其他菜单子菜单" class="headerlink" title="SubMenu(其他菜单子菜单)"></a>SubMenu(其他菜单子菜单)</h2><ol>
<li>在其他menu的某个选项的基础上设置子菜单,不支持图标设置,且子菜单不能二级嵌套,否则直接报告异常.</li>
<li><p>以OptionsMenu为父菜单的实现步骤:</p>
<ol>
<li><p>onCreateOptionsMenu()中,在菜单选项4中,设置子菜单5,6,7,8;</p>
<pre><code>menu.add(Menu.NONE, 1, Menu.NONE, &quot;设置1&quot;).setIcon(R.drawable.ic_launcher);
menu.add(Menu.NONE, 2, Menu.NONE, &quot;设置2&quot;);
menu.add(Menu.NONE, 3, Menu.NONE, &quot;设置3&quot;);

SubMenu subMenu = menu.addSubMenu(Menu.NONE, 4, Menu.NONE, &quot;哈哈&quot;);
subMenu.setHeaderIcon(R.drawable.ic_launcher);
subMenu.setHeaderTitle(&quot;显示标题&quot;);//设置子菜单的标题
subMenu.add(Menu.NONE, 5, Menu.NONE, &quot;设置5&quot;).setIcon(R.drawable.ic_launcher);
subMenu.add(Menu.NONE, 6, Menu.NONE, &quot;设置6&quot;);
subMenu.add(Menu.NONE, 7, Menu.NONE, &quot;设置8&quot;);
subMenu.add(Menu.NONE, 8, Menu.NONE, &quot;设置9&quot;);
</code></pre></li>
<li>子菜单的点击事件也是在父菜单的on<strong>*</strong>ItemSelected()中分支结构进行.</li>
</ol>
</li>
</ol>
<hr>
<h2 id="ContextMenu-绑定控件或者布局的长按显示菜单"><a href="#ContextMenu-绑定控件或者布局的长按显示菜单" class="headerlink" title="ContextMenu(绑定控件或者布局的长按显示菜单)"></a>ContextMenu(绑定控件或者布局的长按显示菜单)</h2><ol>
<li>该菜单是绑定在view上,长按view弹出的菜单,没有个数限制,没有图标显示.</li>
<li><p>实现步骤:</p>
<ol>
<li>注册绑定view -&gt;<code>registerForContextMenu(View)</code>;</li>
<li>onCreateContextMenu()方法中设置menu菜单项,可以设置子菜单;</li>
<li>onContextItemSelected()方法中switch分支结构判断响应事件;</li>
<li>onDestroy()中解除注册绑定 -&gt;<code>unregisterForContextMenu(View)</code>.</li>
</ol>
</li>
</ol>
<hr>
<h2 id="PopupMenu和PopupWindow"><a href="#PopupMenu和PopupWindow" class="headerlink" title="PopupMenu和PopupWindow"></a>PopupMenu和PopupWindow</h2><ol>
<li>二者的区别:<ol>
<li>popPupMenu还是一个Menu菜单的呈现，popupWindow而是一个window窗口的呈现。</li>
<li>popupMenu的呈现是围绕着控件呈现在控件的边缘。popupWindow即可以呈现在控件的周围页可以呈现在指定的location。</li>
</ol>
</li>
<li><p>PopupWindow</p>
<ol>
<li>popupWindow在现实的时候正常显示，但是如果需要让当前的窗口响应了点击之后消失掉，就需要设置setBackgroundDrawable。</li>
<li><p>实现步骤:</p>
<ol>
<li><p>在某个点击事件中:</p>
<ol>
<li>创建对象<pre><code>PopupWindow popWindow  = new PopupWindow(this);
</code></pre></li>
<li><p>指定显示的宽高</p>
<pre><code>popWindow.setWidth(200);
popWindow.setHeight(100);
</code></pre></li>
<li><p>关联显示的内容xml</p>
<pre><code>View view = View.inflate(this, R.layout.view_popupwindow, null);
popWindow.setContentView(view);
</code></pre></li>
<li><p>设置window的显示位置</p>
<pre><code>//popWindow.setBackgroundDrawable(getResources().getDrawable(R.drawable.ic_launcher));
//呈现在某个控件的下方
//popWindow.showAsDropDown(mytv2);
//popWindow.showAsDropDown(tv, 100, 100);
//呈现在具体的位置
popWindow.showAtLocation(tv, Gravity.CENTER, 100, 200);
</code></pre></li>
<li><p>给xml的view设置点击事件</p>
<pre><code>TextView hahaTv = (TextView) view.findViewById(R.id.haha);
hahaTv.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        Log.i(&quot;TAg&quot;, &quot;点击了&quot;);

        popWindow.dismiss();
    }
});
</code></pre></li>
</ol>
</li>
</ol>
</li>
<li><p>PopupMenu</p>
<ol>
<li>呈现一个可移动的pop菜单，呈现在对应关联的view视图的周围。默认呈现在下方，如果下方不存在空间会above。</li>
<li>popmenu在呈现之前需要当前的activity首先运行起来。否则拿不到当前的窗口令牌。</li>
<li><p>实现步骤:</p>
<ol>
<li><p>点击事件中</p>
<ol>
<li>初始化<br> <code>PopupMenu popupMenu = new PopupMenu(this, tv);</code></li>
<li><p>获取menu</p>
<pre><code>Menu menu = popupMenu.getMenu();
menu.add(Menu.NONE, 1, menu.NONE, &quot;哈哈&quot;);
menu.add(Menu.NONE, 2, menu.NONE, &quot;呵呵&quot;);
menu.add(Menu.NONE, 3, menu.NONE, &quot;嘿嘿&quot;);
</code></pre></li>
<li><p>呈现</p>
<p> <code>popupMenu.show();</code></p>
</li>
<li>switch设置菜单项目的点击事件</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li><p>注:onCreate<em>**</em>Menu()中均可以通过填充menu.xml来完成设置菜单内容</p>
<p> <code>getMenuInflater().inflate(R.menu.main, menu);</code></p>
</li>
</ol>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——SQLite与其他数据库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——SQLite与其他数据库/" itemprop="url">Android之 数据库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SQLite-操作"><a href="#SQLite-操作" class="headerlink" title="SQLite 操作"></a>SQLite 操作</h1><hr>
<ul>
<li><p>目录</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. SQLite ( SQLite 命令中 以&quot;[]&quot;包含的内容表示可省略 )</span><br><span class="line">	- SQLiteHelper</span><br><span class="line">	- 操作</span><br><span class="line">		- 创建数据库</span><br><span class="line">		- 增</span><br><span class="line">		- 删</span><br><span class="line">		- 改</span><br><span class="line">		- 查</span><br><span class="line">		- 关闭数据库</span><br><span class="line">		- 删除数据库</span><br><span class="line">	- SQL语句中的子句</span><br><span class="line">	- SQLite 位运算符</span><br><span class="line"></span><br><span class="line">2. 其他数据库</span><br><span class="line">	- Realm</span><br><span class="line">	- DBFlow</span><br></pre></td></tr></table></figure>
</li>
<li><p>参考</p>
<ul>
<li><a href="http://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noopener"> <strong>SQLite 教程 | 菜鸟教程</strong> </a></li>
<li><a href="https://juejin.im/post/5a5bfc016fb9a01ca10ae0a9#heading-5" target="_blank" rel="noopener"> <strong>Android ：这是一份详细 &amp; 全面的 SQLlite数据库 使用手册</strong> </a></li>
<li><a href="http://blog.csdn.net/linglongxin24/article/details/53230842" target="_blank" rel="noopener"> <strong>玩转SQLite系列</strong> </a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h2><p><img src="https://i.imgur.com/CHgDAL0.png" alt="Sqlite"></p>
<font color="red"><strong>字段支持 </strong></font><br><font color="red"> &gt; <code>NULL</code>、<code>INTEGER</code>、<code>FLOAT</code>、<code>STRING</code>、<code>BLOB</code> </font>




<h3 id="1-SQLiteHelper"><a href="#1-SQLiteHelper" class="headerlink" title="1. SQLiteHelper"></a>1. <code>SQLiteHelper</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySqliteHelper</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MySqliteHelper</span><span class="params">(Context context, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, name, factory, version);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase sqLiteDatabase)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="keyword">int</span> i, <span class="keyword">int</span> i1)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-数据库操作"><a href="#2-数据库操作" class="headerlink" title="2. 数据库操作"></a>2. 数据库操作</h3><ul>
<li><p>创建或获取数据库</p>
<ul>
<li><p>打开或创建原始位置的数据库</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PersonalSQLiteHelper helper = <span class="keyword">new</span> PersonalSQLiteHelper(<span class="keyword">this</span>, <span class="string">"db_name"</span>, <span class="number">1</span>);</span><br><span class="line">SQLiteDatabase db0 = helper.getReadableDatabase();</span><br><span class="line"><span class="comment">//获取位置信息</span></span><br><span class="line">List&lt;Pair&lt;String, String&gt;&gt; attachedDbs = db0.getAttachedDbs();</span><br><span class="line">String path = attachedDbs.get(<span class="number">0</span>).first + attachedDbs.get(<span class="number">0</span>).second;</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开指定位置的数据库</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase db1 = SQLiteDatabase.openOrCreateDatabase(filePath, <span class="keyword">null</span>);</span><br><span class="line">SQLiteDatabase db2 = SQLiteDatabase.openOrCreateDatabase(file, <span class="keyword">null</span>);</span><br><span class="line"><span class="comment">//获取位置信息</span></span><br><span class="line">List&lt;Pair&lt;String, String&gt;&gt; attachedDbs = db1.getAttachedDbs();</span><br><span class="line">String path = attachedDbs.get(<span class="number">0</span>).first + attachedDbs.get(<span class="number">0</span>).second;</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开或创建指定操作模式的数据库</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase db3 = <span class="keyword">this</span>.openOrCreateDatabase(<span class="string">"db_name"</span>, MODE_PRIVATE, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="comment">//获取位置信息</span></span><br><span class="line">List&lt;Pair&lt;String, String&gt;&gt; attachedDbs = db3.getAttachedDbs();</span><br><span class="line">String path = attachedDbs.get(<span class="number">0</span>).first + attachedDbs.get(<span class="number">0</span>).second;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>创建表单<code>(create)</code></p>
<ul>
<li>SQL 语句  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS 表名(	</span><br><span class="line">		列名  列类型(大小)  属性,</span><br><span class="line">		列名  列类型(大小)  属性,</span><br><span class="line">		列名  列类型(大小)  属性</span><br><span class="line">		... )</span><br><span class="line">eg:</span><br><span class="line">	CREATE TABLE IF NOT EXISTS tableName(_id integer primary key autoincrement, name varchar(20) not null , ...)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>删除表单<code>(drop)</code></p>
<ul>
<li>SQL 语句  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF  EXISTS 表名	</span><br><span class="line">eg:</span><br><span class="line">	DROP TABLE IF EXISTS tableName</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>增<code>(insert)</code></p>
<ul>
<li><p>SQL 语句</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO TABLE_NAME [(column1, column2, column3,...columnN)]  VALUES (value1, value2, value3,...valueN)</span><br><span class="line">		</span><br><span class="line">eg:</span><br><span class="line">	- INSERT INTO User VALUES (1,&apos;张三&apos;,26)</span><br><span class="line">	- INSERT INTO User(id,name,age) VALUES (1,&apos;张三&apos;,26)</span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<p>  // 从一张表填充到另一个表<br>  INSERT INTO first_table_name [(column1, column2, … columnN)]  SELECT column1, column2, …columnN </p>
<pre><code>FROM second_table_name [WHERE condition]
</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- API</span><br><span class="line"></span><br><span class="line">	```java</span><br><span class="line">	    /**</span><br><span class="line">	     * 给user表中新增一条数据</span><br><span class="line">	     * &lt;p&gt;</span><br><span class="line">	     * long insert(String table, String nullColumnHack, ContentValues values)</span><br><span class="line">	     * 第一个参数：数据库表名</span><br><span class="line">	     * 第二个参数：当values参数为空或者里面没有内容的时候，</span><br><span class="line">	     * insert是会失败的(底层数据库不允许插入一个空行)，</span><br><span class="line">	     * 为了防止这种情况，要在这里指定一个列名，</span><br><span class="line">	     * 到时候如果发现将要插入的行为空行时，</span><br><span class="line">	     * 就会将你指定的这个列名的值设为null，然后再向数据库中插入。</span><br><span class="line">	     * 第三个参数：要插入的值</span><br><span class="line">	     * 返回值：成功操作的行号，错误返回-1</span><br><span class="line">	     *</span><br><span class="line">	     * @param v</span><br><span class="line">	     */</span><br><span class="line">	    public void insert(View v) &#123;</span><br><span class="line">	        String table = &quot;user&quot;;</span><br><span class="line">	        ContentValues contentValues = new ContentValues();</span><br><span class="line">	        contentValues.put(&quot;name&quot;, &quot;张三&quot;);</span><br><span class="line">	        contentValues.put(&quot;age&quot;, 25);</span><br><span class="line">	        long num = sqLiteDatabase.insert(table, null, contentValues);</span><br><span class="line">	        if (num == -1) &#123;</span><br><span class="line">	            Toast.makeText(this, &quot;插入失败&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">	        &#125; else &#123;</span><br><span class="line">	            Toast.makeText(this, &quot;成功插入到第&quot; + num + &quot;行&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><font color="red"><strong>API 批量操作的优化</strong></font>

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">String table = <span class="string">"user"</span>;</span><br><span class="line"><span class="comment">/**开启一个事务**/</span></span><br><span class="line">sqLiteDatabase.beginTransaction();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">               ContentValues contentValues = <span class="keyword">new</span> ContentValues();</span><br><span class="line">               contentValues.put(<span class="string">"name"</span>, <span class="string">"张三"</span> + i);</span><br><span class="line">               contentValues.put(<span class="string">"age"</span>, i);</span><br><span class="line">               sqLiteDatabase.insertOrThrow(table, <span class="keyword">null</span>, contentValues);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">/**将数据库事务设置为成功**/</span></span><br><span class="line">           sqLiteDatabase.setTransactionSuccessful();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="comment">/**结束数据库事务**/</span></span><br><span class="line">           sqLiteDatabase.endTransaction();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>删<code>(delete)</code></p>
<ul>
<li><p>SQL 语句</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM table_name WHERE [condition]</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">	DELETE FROM User WHERE id=2</span><br><span class="line">	DELETE FROM COMPANY //删除所有记录</span><br></pre></td></tr></table></figure>
</li>
<li><p>API</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 删除user表中id为2的记录</span></span><br><span class="line"><span class="comment">    * &lt;p&gt;</span></span><br><span class="line"><span class="comment">    * int delete(String table, String whereClause, String[] whereArgs)</span></span><br><span class="line"><span class="comment">    * 第一个参数：删除的表名</span></span><br><span class="line"><span class="comment">    * 第二个参数：修改的条件的字段</span></span><br><span class="line"><span class="comment">    * 第三个参数：修改的条件字段对应的值</span></span><br><span class="line"><span class="comment">    * 返回值：影响的行数</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> v</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">   	<span class="comment">//1</span></span><br><span class="line">       <span class="comment">//String table = "user";</span></span><br><span class="line">       <span class="comment">//String where = "id=2";</span></span><br><span class="line">       <span class="comment">//sqLiteDatabase.delete(table, where, null);</span></span><br><span class="line">       </span><br><span class="line">       <span class="comment">//2</span></span><br><span class="line">       String table = <span class="string">"user"</span>;</span><br><span class="line">       String where = <span class="string">"id=?"</span>;</span><br><span class="line">       String[] whereArgs = <span class="keyword">new</span> String[]&#123;<span class="string">"2"</span>&#125;;</span><br><span class="line">       <span class="keyword">int</span> num = sqLiteDatabase.delete(table, where, whereArgs);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>改<code>(update)</code></p>
<ul>
<li><p>SQL 语句</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET column1 = value1, column2 = value2.... WHERE [condition]</span><br><span class="line">//可以使用 AND 或 OR 运算符来结合 N 个数量的条件</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">	UPDATE User SET name=&quot;李四&quot; WHERE id=2;</span><br><span class="line">	UPDATE COMPANY SET ADDRESS = &apos;Texas&apos; WHERE ID = 6;</span><br><span class="line">	UPDATE COMPANY SET ADDRESS = &apos;Texas&apos;, SALARY = 20000.00;//修改所有</span><br></pre></td></tr></table></figure>
</li>
<li><p>API</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* UPDATE User SET name="李四" WHERE id=2; */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 方式一</span></span><br><span class="line"><span class="comment">     */</span>		</span><br><span class="line">    <span class="comment">//String table = "user";</span></span><br><span class="line">    <span class="comment">//ContentValues contentValues = new ContentValues();</span></span><br><span class="line">    <span class="comment">//contentValues.put("name", "李四");</span></span><br><span class="line">    <span class="comment">//String where = "id=2";</span></span><br><span class="line">    <span class="comment">//sqLiteDatabase.update(table, contentValues, where, null);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 方式二</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String table = <span class="string">"user"</span>;</span><br><span class="line">    ContentValues contentValues = <span class="keyword">new</span> ContentValues();</span><br><span class="line">    contentValues.put(<span class="string">"name"</span>, <span class="string">"李四"</span>);</span><br><span class="line">    String where = <span class="string">"id=?"</span>;</span><br><span class="line">    String[] whereArgs = <span class="keyword">new</span> String[]&#123;<span class="string">"2"</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> num = sqLiteDatabase.update(table, contentValues, where, whereArgs);</span><br><span class="line">    Toast.makeText(<span class="keyword">this</span>, <span class="string">"修改了"</span> + num + <span class="string">"行"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>查<code>(select)</code></p>
<ul>
<li>SQL 语句  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">SELECT * 		FROM 表名 WHERE 查询的条件表达式  GROUP BY 分组的字段 ORDER BY 排序的字段</span><br><span class="line">SELECT 字段名 	FROM 表名 WHERE 查询的条件表达式  GROUP BY 分组的字段 ORDER BY 排序的字段</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">	SELECT * FROM  User</span><br><span class="line">	SELECT * FROM  User WHERE id=2</span><br><span class="line">	</span><br><span class="line">	SELECT name,age FROM  User WHERE age&gt;25</span><br><span class="line">	SELECT name,age FROM  User WHERE age BETWEEN 20 AND 40</span><br><span class="line">	SELECT name,age FROM  User WHERE name LIKE &quot;亮&quot;</span><br><span class="line">	SELECT name,age FROM  User WHERE name IS NULL</span><br><span class="line">	SELECT name,age FROM  User ORDER BY age</span><br><span class="line"></span><br><span class="line">//查询过程		</span><br><span class="line">public void query(View v) &#123;</span><br><span class="line"></span><br><span class="line">	String sql = &quot;SELECT * FROM user&quot;;</span><br><span class="line">	/***这里得到的是一个游标*/</span><br><span class="line">	Cursor cursor = sqLiteDatabase.rawQuery(sql, null, null);</span><br><span class="line">	if (cursor == null) &#123;</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line">	/***循环游标得到数据*/</span><br><span class="line">	while (cursor.moveToNext()) &#123;</span><br><span class="line">		Log.d(Contacts.TAG,</span><br><span class="line">			&quot;id=&quot; + cursor.getInt(0) </span><br><span class="line">			+ &quot;，name=&quot; + cursor.getString(1)</span><br><span class="line">			+ &quot;，age=&quot; + cursor.getInt(2));</span><br><span class="line">		int id = cursor.getInt(cursor.getColumnIndex(&quot;id&quot;));</span><br><span class="line">	&#125;</span><br><span class="line">	/***记得操作完将游标关闭*/</span><br><span class="line">	cursor.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>关闭数据库</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询的游标</span></span><br><span class="line">queryCursor.close();</span><br><span class="line"><span class="comment">//数据库对象</span></span><br><span class="line">sqLiteDatabase.close();</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除数据库,通过删除文件进行删除操作</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关闭数据库文件及操作</span></span><br><span class="line">db2.close();</span><br><span class="line">String path1 = db2.getPath();</span><br><span class="line">File file = <span class="keyword">new</span> File(path1);</span><br><span class="line"><span class="keyword">if</span> (file.exists() &amp;&amp; file.isFile()) &#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		file.delete();</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-SQL语句中的子句"><a href="#3-SQL语句中的子句" class="headerlink" title="3. SQL语句中的子句"></a>3. SQL语句中的子句</h3><ul>
<li><code>WHERE</code><ol>
<li>比较 / 逻辑运算符: &gt;、&lt;、=</li>
<li>与( AND )、或( OR 、  IN ( value1, value2 ) )、非( IS NOT )、包含( LIKE / GLOB  )</li>
<li>筛选语句,先子后父</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">SELECT * FROM COMPANY WHERE AGE &gt;= 25 AND SALARY &gt;= 65000;</span><br><span class="line">SELECT * FROM COMPANY WHERE AGE IS NOT NULL;	</span><br><span class="line"></span><br><span class="line">SELECT * FROM COMPANY WHERE NAME LIKE &apos;Ki%&apos;; </span><br><span class="line">SELECT * FROM COMPANY WHERE NAME GLOB &apos;Ki*&apos;;</span><br><span class="line">// LIKE &apos;Ki%&apos; 与 GLOB &apos;Ki*&apos; 相同 , 均表示 以 &apos;Ki&apos; 开始的所有记录，&apos;Ki&apos; 之后的字符不做限制;</span><br><span class="line"></span><br><span class="line">//列出了 AGE 的值为 25 或 27 的所有记录</span><br><span class="line">SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 );</span><br><span class="line">//列出了 AGE 的值既不是 25 也不是 27 的所有记录</span><br><span class="line">SELECT * FROM COMPANY WHERE AGE NOT IN ( 25, 27 );</span><br><span class="line">//列出了 AGE 的值在 25 与 27 之间的所有记录</span><br><span class="line">SELECT * FROM COMPANY WHERE AGE BETWEEN 25 AND 27;</span><br><span class="line"></span><br><span class="line">//筛选结果 要包含子句筛选结果</span><br><span class="line">SELECT AGE FROM COMPANY WHERE 	EXISTS (SELECT AGE FROM COMPANY WHERE SALARY &gt; 65000);</span><br><span class="line">// 列出了比 SALARY大于65000的值的AGE项 更大的值的所有信息</span><br><span class="line">SELECT * FROM COMPANY WHERE 	AGE &gt; (SELECT AGE FROM COMPANY WHERE SALARY &gt; 65000);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ORDER BY</code><br>排序操作。使用 <code>ASC | DESC</code>设置升序降序。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT column-list FROM table_name [WHERE condition] [ORDER BY column1, column2, .. columnN] [ASC | DESC];</span><br></pre></td></tr></table></figure>
<ul>
<li><code>GROUP BY</code><br>对相同的数据进行分组。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT column0, SUM(column1) FROM tabName 	[GROUP BY column0] 	[ORDER BY column0][ASC | DESC];</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">	//筛选出带有 NAME 与 SALARY 项的信息,根据NAME字段排序,并将相同NAME字段的SALARY合并为SUM(SALARY) ;</span><br><span class="line">	SELECT NAME, SUM(SALARY) FROM COMPANY 	GROUP BY NAME 	ORDER BY NAME	ASC;//升序</span><br><span class="line">	SELECT NAME, SUM(SALARY) FROM COMPANY 	GROUP BY NAME 	ORDER BY NAME 	DESC;//降序</span><br></pre></td></tr></table></figure>
<ul>
<li><code>LIKE</code><br>用来匹配通配符指定模式的文本值。如果搜索表达式与模式表达式匹配，LIKE 运算符将返回真（true），也就是 1。<br>通配符有” % “、” _ “:<ul>
<li>“ % “ : 零个、一个或多个数字或字符；</li>
<li>“ _ “ : 代表一个单一的数字或字符。</li>
</ul>
</li>
</ul>
<p><font color="red"><strong>示例</strong></font>:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><code>LIKE</code>语句</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘200%’</td>
<td style="text-align:left">查找以 200 开头的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘%200%’</td>
<td style="text-align:left">查找任意位置包含 200 的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘_00%’</td>
<td style="text-align:left">查找第二位和第三位为 00 的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘2_%_%’</td>
<td style="text-align:left">查找以 2 开头，且长度至少为 3 个字符的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘%2’</td>
<td style="text-align:left">查找以 2 结尾的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘_2%3’</td>
<td style="text-align:left">查找第二位为 2，且以 3 结尾的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY LIKE ‘2___3’</td>
<td style="text-align:left">查找长度为 5 位数，且以 2 开头以 3 结尾的任意值</td>
</tr>
</tbody>
</table>
<ul>
<li><p><code>GLOB</code><br>用来匹配通配符指定模式的文本值。如果搜索表达式与模式表达式匹配，GLOB 运算符将返回真（true），也就是 1。<font color="red"><strong>大小写敏感</strong></font>。</p>
<ul>
<li>星号 （*） : 代表零个、一个或多个数字或字符。</li>
<li>问号 （?） : 代表一个单一的数字或字符。</li>
</ul>
</li>
</ul>
<p><font color="red"><strong>示例</strong></font>:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><code>GLOB</code>语句</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘200*’</td>
<td style="text-align:left">查找以 200 开头的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘*200*‘</td>
<td style="text-align:left">查找任意位置包含 200 的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘?00*’</td>
<td style="text-align:left">查找第二位和第三位为 00 的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘2??’</td>
<td style="text-align:left">查找以 2 开头，且长度至少为 3 个字符的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘*2’</td>
<td style="text-align:left">查找以 2 结尾的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘?2*3’</td>
<td style="text-align:left">查找第二位为 2，且以 3 结尾的任意值</td>
</tr>
<tr>
<td style="text-align:left">WHERE SALARY GLOB ‘2???3’</td>
<td style="text-align:left">查找长度为 5 位数，且以 2 开头以 3 结尾的任意值</td>
</tr>
</tbody>
</table>
<ul>
<li><code>HAVING</code><br>HAVING 子句必须放在 GROUP BY 子句之后，必须放在 ORDER BY 子句之前。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT column1, column2 FROM table1, table2 WHERE [ conditions ]</span><br><span class="line">	GROUP BY column1, column2 HAVING [ conditions ] ORDER BY column1, column2</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">	//name 字段 重复次数小于2的内容按名称排序</span><br><span class="line">	SELECT * FROM COMPANY GROUP BY name HAVING count(name) &lt; 2;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="4-SQLite-位运算符"><a href="#4-SQLite-位运算符" class="headerlink" title="4. SQLite 位运算符"></a>4. SQLite 位运算符</h3><p>位运算符作用于位，并逐位执行操作。真值表 &amp; 和 | 如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">p</th>
<th style="text-align:center">q</th>
<th style="text-align:center">p &amp; q</th>
<th style="text-align:center">p &#124; q</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>假设如果 A = 60，且 B = 13，现在以二进制格式，它们如下所示：<br>A = 0011 1100;<br>B = 0000 1101;<br>A&amp;B = 0000 1100;<br>A|B = 0011 1101;<br>~A  = 1100 0011;<br>下表中列出了 SQLite 语言支持的位运算符。假设变量 A=60，变量 B=13，则：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>如果同时存在于两个操作数中，二进制 AND 运算符复制一位到结果中。</td>
<td>( A &amp; B ) =12，即为 0000 1100</td>
</tr>
<tr>
<td>&#124;</td>
<td>如果存在于任一操作数中，二进制 OR 运算符复制一位到结果中。</td>
<td>( A &#124; B ) = 61，即为 0011 1101</td>
</tr>
<tr>
<td>~</td>
<td>二进制补码运算符是一元运算符，具有”翻转”位效应，即0变成1，1变成0。</td>
<td>( ~ A ) = -61，即为 1100 0011，一个有符号二进制数的补码形式。</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>二进制左移运算符。左操作数的值向左移动右操作数指定的位数。</td>
<td>A &lt;&lt; 2=240，即为 1111 0000</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>二进制右移运算符。左操作数的值向右移动右操作数指定的位数。</td>
<td>A &gt;&gt; 2 =15，即为 0000 1111</td>
</tr>
</tbody>
</table>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——内存&内存机制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——内存&内存机制/" itemprop="url">Android之 内存与内存机制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="内存与内存机制"><a href="#内存与内存机制" class="headerlink" title="内存与内存机制"></a>内存与内存机制</h1><h3 id="内存机制"><a href="#内存机制" class="headerlink" title="内存机制"></a>内存机制</h3><hr>
<h3 id="内存占用过多的原因"><a href="#内存占用过多的原因" class="headerlink" title="内存占用过多的原因"></a>内存占用过多的原因</h3><ul>
<li><p>明明可以少创建对象，却创建多个；</p>
<pre><code>1. ArrayMap/SparseArray 替代 HashMap，避免装箱解箱；
2. StringBuilder 替代 String拼接;
3. DefineView # onDraw()中避免创建对象造成的内存抖动。
</code></pre></li>
<li><p>明明可以复用，却不提取而重复操作；</p>
<pre><code>1. 相同的代码重复执行 → 抽取函数；
2. 相同xml的多次填充 → xml转View；
3. convertView不复用 → ViewHolder。
</code></pre></li>
<li><p>明明可以释放，却不释放；</p>
<pre><code>1. IO流/cursor游标；
2. Listeners/观察者；
3. handler.removeCallbacksAndMessages(null)；
4. 动画(易造成内存泄露)。
</code></pre></li>
<li><p>明明可以减少内存占用大小，却不优化；</p>
<pre><code>1. 静态属性代替枚举，减少内存占用；
2. bitmap/drawable 处理
    1. BitmapFactory#decodeResource();
    2. BitmapFactory.Options;
    3. Bitmap.Config.RBG_565/ARGB_4444;
    4. Bitmap#recycle();
</code></pre></li>
<li><p>可以使用弱引用代替使用强引用。</p>
</li>
</ul>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之多媒体——文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之多媒体——文件/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之多媒体——音频/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之多媒体——音频/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之多媒体——直播/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之多媒体——直播/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之多进程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之多进程/" itemprop="url">Android之 多进程与IPC</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多进程与IPC"><a href="#多进程与IPC" class="headerlink" title="多进程与IPC "></a><font color="red" size="6" face="微软雅黑">多进程与IPC </font></h1><pre><code>相关链接：
        1. http://blog.csdn.net/spencer_hale/article/details/54968092
        2. https://mp.weixin.qq.com/s?__biz=MzIwMzYwMTk1NA==&amp;mid=2247485002&amp;idx=1&amp;sn=e07f1949362946ee545079259b6b9014&amp;chksm=96cda707a1ba2e11da927e18c0500bcc9231a82e401069f06048f68b09392c3f332e7893f9a5&amp;mpshare=1&amp;scene=23&amp;srcid=06168CkIdWwm7Ep72uzPbVLx#rd
        3. https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=400656149&amp;idx=1&amp;sn=122b4f4965fafebf78ec0b4fce2ef62a&amp;mpshare=1&amp;scene=1&amp;srcid=0501f6p8yRsM5qj6OBKEVY1T&amp;key=16e063fbfd27c52cdf5c92791e0542126da55aeb373dcd13df6aa6c417ec61127af2618384b2201ffa7c918e4bbe6780b4d20d3e2ec989af4e2ec3adfda18308cac9706ac4f970ae73fb86211c44b7c2&amp;ascene=0&amp;uin=ODExMTkxNjU%3D&amp;devicetype=iMac+MacBookPro11%2C2+OSX+OSX+10.12.3+build&amp;version=12020510&amp;nettype=WIFI&amp;fontScale=100&amp;pass_ticket=AxhG0QxjCX8weF512sU8ttFb%2B7z%2B8JxvShlgh7diOtM%3D
</code></pre><p>每一个应用会被分配一个唯一的UID， <strong><font color="red">具有相同UID的应用才能 共享数据 / 内存数据 / data目录 / 组件信息 等。</font></strong></p>
<p>多进程的用处:</p>
<pre><code>1. 常驻后台做守护进程，推送服务;
2. 多进程可获得多份内存空间(最早版本单个应用可以使用16MB);
3. 对于webview，图库等，由于存在内存系统泄露或者占用内存过多的问题，我们可以采用单独的进程。
</code></pre><p>多进程弊端：</p>
<pre><code>1. 耗电；
2. 调试断点问题；
3. 文件共享，内存对象共享问题；
4. Application多次重建问题；
4. 交互复杂性；
</code></pre><p>指定多进程的方式:</p>
<pre><code>1. 四大组件指定 → android:process
    1. 使用&quot;:&quot;声明的进程属于私有进程,其他应用组件不可在同一进程;
    2. 不使用&quot;:&quot;声明的进程可以通过相同的ShareUID和签名才能在同一进程;
2. JNI native 层 fork 新进程
</code></pre><p>跨进程通信的方式有:</p>
<pre><code>- Intent/Bundle传递数据;
- 共享文件和SharePreferences(私有进程可以访问);
- Binder机制(Messenger/AIDL机制);
- ContentProvider;
- Socket通信;
</code></pre><table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th>优点</th>
<th style="text-align:center">缺点/注意点</th>
<th style="text-align:center">设用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Bundle</td>
<td>简单易用</td>
<td style="text-align:center">只能传输Bundle支持的数据类型</td>
<td style="text-align:center">四大组件间的进程通信</td>
</tr>
<tr>
<td style="text-align:center">文件共享</td>
<td>简单易用</td>
<td style="text-align:center">不适合高并发的情况，<br>并且无法做到进程间的即时通讯</td>
<td style="text-align:center">无并发访问情况下，<br>交换简单的<br>数据实时性不高的情况</td>
</tr>
<tr>
<td style="text-align:center">AIDL</td>
<td>支持一对多并发通信，<br>支持实时通讯</td>
<td style="text-align:center">需要处理好线程同步</td>
<td style="text-align:center">一对多通信且有RPC需求</td>
</tr>
<tr>
<td style="text-align:center">Messenger</td>
<td>支持一对多串行通信，<br>支持实时通讯</td>
<td style="text-align:center">不能很好处理高并发情况，<br>不支持RPC,数据通过Message进行传输，<br>因此只能传输Bundle支持的数据类型</td>
<td style="text-align:center">低并发的一对多即时通信,<br>无RPC需求，或者无需返回结果的RPC需求</td>
</tr>
<tr>
<td style="text-align:center">ContentProvider</td>
<td>在数据源访问方面功能强大，<br>支持一对多并发数据共享，<br>可通过Call方法扩展其他操作</td>
<td style="text-align:center">主要提供数据源的CRUD操作</td>
<td style="text-align:center">一对多的进程间数据共享</td>
</tr>
<tr>
<td style="text-align:center">Socket</td>
<td>功能强大，<br>可以通过网络传输字节流，<br>支持一对多并发实时通讯</td>
<td style="text-align:center">实现细节有点繁琐，不支持直接的RPC</td>
<td style="text-align:center">网络数据交换</td>
</tr>
</tbody>
</table>
<p>注：RPC(调用远程服务中的方法)</p>
<hr>
<h3 id="Binder-amp-IBinder"><a href="#Binder-amp-IBinder" class="headerlink" title="Binder &amp; IBinder"></a>Binder &amp; IBinder</h3><p>从框架层角度: <strong>Binder是<code>ServiceManager(c++)</code> 连接各种<code>Manager</code>和<code>ManagerService</code>的桥梁 ; </strong><br>从应用层角度: Binder是客户端和服务端通信的媒介。</p>
<p>工作原理:</p>
<pre><code>asInterface(IBinder binder):服务段Binder转换成客户端需要的AIDL接口类型,同进程就返回的是Stub本身,
反之就是系统分装后的Stub.proxy对象;

onTransact(int code,Pracel data,Pracel reply,int flags):服务端通过code判断客户端请求的目标方法,
然后从data中取出方法所需要的参数执行,然后给reply写入返回值,当前方法返回false客户端就请求失败.

客户端发生远程请求时,线程挂起一直到得到响应或者被杀死,Binder得到客户端请求通过inTransact()将data参数写入到目标函数,
目标函数执行完毕将数据返回给客户端.
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">流程分析:</span><br><span class="line">	客户端请求Binder并挂起等待</span><br><span class="line">	 → Binder将数据写入data →  onTransact(transact(根据code取出方法所需要参数传入)</span><br><span class="line">	 → 线程池中完成操作 → 将返回内容写入reply)</span><br><span class="line">	 → 返回Binder强转类型(失败成功看onTransact返回值)</span><br><span class="line">	 → 返回数据给客户端</span><br></pre></td></tr></table></figure>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1512390149844&amp;di=fa72137446d16e811330d3dcb956b7ca&amp;imgtype=0&amp;src=http%3A%2F%2Fwww.th7.cn%2Fd%2Ffile%2Fp%2F2016%2F09%2F22%2F6c542eae3fcf2879e6900b41d1157958.jpg" alt="image"></p>
<hr>
<h3 id="AIDL"><a href="#AIDL" class="headerlink" title="AIDL"></a>AIDL</h3><p>根据AIDL自动生成的java 代码中, 使用代理模式,<code>Proxy</code>类使用<code>IBinder # transact()</code>标记函数参数,返回值等内容.</p>
<p>AIDL支持的数据类型:</p>
<pre><code>1. 基本数据类型
2. String,CharSequeue
3. ArrayList
4. HashMap
5. Parcelable
6. 可打包(实现Parceable)的AIDL对象(AIDL对象必须手动导入文件位置)
</code></pre><p><font color="red" face="微软雅黑"><br>注 :  </font></p>
<ul>
<li><p><strong>当AIDL文件要使用实现Parcelable的类时,需要同时在AIDL文件夹下与Java文件夹下同位置创建Java类与AIDL文件</strong> ;<font color="black">  例如:</font></p>
<pre><code>//com.schaffer.base.test.Book.java

package com.schaffer.base.test;
public class Book implements Parcelable {
    //...
}

//com.schaffer.base.test.Book.aidl
package com.schaffer.base.test;
parcelable Book;
</code></pre><p></p>
</li>
<li><p>由于进程间对象不可以共享,<font color="black">跨进程移除监听不可以直接移除,</font>需要使用<code>RemoteCallbackList</code>来移除<code>Listener</code>.</p>
<pre><code>内部使用ArrayMap&lt;IBinder,Callback&gt;;
获取集合中的内容需要使用 beginBroadcast/finishBroadcast()进行遍历或者其他操作;    
解除注册时,遍历服务器所有的listener,将和解除注册的Listener的binder对应的删除.
</code></pre></li>
</ul>
<p></p>
<h4 id="ServiceConnection"><a href="#ServiceConnection" class="headerlink" title="ServiceConnection"></a>ServiceConnection</h4><p><code>onServiceConnected()</code> &amp; <code>onServiceDisconnected()</code> 均运行在UI线程.不可做耗时操作. </p>
<h4 id="Binder重连"><a href="#Binder重连" class="headerlink" title="Binder重连"></a>Binder重连</h4><p>Binder是可能意外死亡的，往往是由于服务端进程意外停止了，这时我们需要重新连接服务，有两种方式： </p>
<ul>
<li><p>给Binder设置死亡代理,监听<code>binderDied</code>方法回调(运行在客户端Binder线程池) </p>
<pre><code>// 服务端
Binder binder = new DefineInterface.Stub() {
    @Override
    public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString) throws RemoteException {

    }

    //...

    @Override
    public void setBinderDeath(IBinder binder) throws RemoteException {
        binder.linkToDeath(new MyDeathRecipient(), 0);
    }
};
</code></pre></li>
</ul>
<pre><code>public static class MyDeathRecipient implements IBinder.DeathRecipient {

    @Override
    public void binderDied() {
        Log.d(&quot;TAG&quot;, &quot;binder 离线&quot;);
    }
}



//客户端
@Override
public void onCreate(@Nullable Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    binder = new Binder();
    bindService(new Intent(this,TestAidlService.class),connection,BIND_AUTO_CREATE);
}

public ServiceConnection connection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        DefineInterface define = DefineInterface.Stub.asInterface(service);

        try {
            define.setBinderDeath(binder);
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
    }
};
</code></pre><ul>
<li>在<code>onServiceDisConnected</code>中重连服务(运行在主线程)</li>
</ul>
<h4 id="AIDL进程交互所需权限"><a href="#AIDL进程交互所需权限" class="headerlink" title="AIDL进程交互所需权限"></a>AIDL进程交互所需权限</h4><p>客户端: <strong>添加自定义权限</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;permission</span><br><span class="line">    android:name=&quot;com.schaffer.base.permission.BIND_TEST&quot;</span><br><span class="line">    android:protectionLevel=&quot;normal&quot; /&gt;</span><br></pre></td></tr></table></figure></p>
<p>服务端: <strong>可以使用两种验证方式判断是否允许其他进程客户端绑定Service.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">  @Nullable</span><br><span class="line">  @Override</span><br><span class="line">  public IBinder onBind(Intent intent) &#123;</span><br><span class="line">/* 判断权限是否被允许 */</span><br><span class="line">      if (checkCallingOrSelfPermission(&quot;com.schaffer.base.permission.BIND_TEST&quot;) == PackageManager.PERMISSION_DENIED) &#123;</span><br><span class="line">          return null;</span><br><span class="line">      &#125;</span><br><span class="line">      return binder;</span><br><span class="line">  &#125;</span><br><span class="line">	</span><br><span class="line">  Binder binder = new DefineInterface.Stub() &#123;</span><br><span class="line">      @Override</span><br><span class="line">      public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString) throws RemoteException &#123;</span><br><span class="line">	</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">//...</span><br><span class="line"></span><br><span class="line">      @Override</span><br><span class="line">      public boolean onTransact(int code, Parcel data, Parcel reply, int flags) throws RemoteException &#123;</span><br><span class="line">          /* 判断权限是否被允许 */</span><br><span class="line">          if (checkCallingOrSelfPermission(&quot;com.schaffer.base.permission.BIND_TEST&quot;) == PackageManager.PERMISSION_DENIED) &#123;</span><br><span class="line">              return false;</span><br><span class="line">          &#125;</span><br><span class="line">          /* 判断包名是否被允许 */</span><br><span class="line">          String pn = null;</span><br><span class="line">          String[] packages = getPackageManager().getPackagesForUid(getCallingUid());</span><br><span class="line">          if (packages != null &amp;&amp; packages.length &gt; 0) &#123;</span><br><span class="line">              pn = packages[0];</span><br><span class="line">          &#125;</span><br><span class="line">          if (!pn.contains(&quot;com.schaffer&quot;)) &#123;</span><br><span class="line">              return false;</span><br><span class="line">          &#125;</span><br><span class="line">          return super.onTransact(code, data, reply, flags);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<h4 id="AIDL-java代码的生成"><a href="#AIDL-java代码的生成" class="headerlink" title="AIDL java代码的生成"></a>AIDL java代码的生成</h4><ul>
<li>AIDL: 初始自定义内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// &gt;&gt;&gt; main/aidl/com.schaffer.base/test/Book.aidl</span><br><span class="line">package com.schaffer.base.test;</span><br><span class="line">parcelable Book;	//Parcelable java实现类</span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt; main/aidl/com.schaffer.base/IMyAidlInterface.aidl</span><br><span class="line">package com.schaffer.base;</span><br><span class="line"></span><br><span class="line">interface IMyAidlInterface &#123;</span><br><span class="line">     String back(int type);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt; main/aidl/com.schaffer.base/DefineInterface.aidl</span><br><span class="line">package com.schaffer.base;</span><br><span class="line">//导入需要的 aidl 或 Parcelable</span><br><span class="line">import com.schaffer.base.IMyAidlInterface;</span><br><span class="line">import com.schaffer.base.test.Book;</span><br><span class="line"></span><br><span class="line">interface DefineInterface &#123;</span><br><span class="line"></span><br><span class="line">    void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat,</span><br><span class="line">            double aDouble, String aString);</span><br><span class="line">            </span><br><span class="line">     void myInterface(in IMyAidlInterface inter);</span><br><span class="line">     List&lt;Book&gt; getList();</span><br><span class="line">     void setBinderDeath(IBinder binder);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>根据aidl 自动生成的 java 代码,<strong>服务端使用生成的抽象 <code>Stub</code> ,完成自定义函数的重写 , 实现 具体实现功能; 客户端 通过静态函数<code>Stub#asInterface</code>判断<code>IBinder</code>类型并返回具体处理代理<code>Proxy(外部aidl 生成接口的实现类)</code>类对象,调用其函数代理给服务端实现.</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line">//project\app\build\generated\source\aidl\mainflavor\debug\com\schaffer\base\DefineInterface.java</span><br><span class="line">package com.schaffer.base;</span><br><span class="line"></span><br><span class="line">public interface DefineInterface extends android.os.IInterface &#123;</span><br><span class="line"></span><br><span class="line">    public static abstract class Stub extends android.os.Binder implements com.schaffer.base.DefineInterface &#123;</span><br><span class="line">        private static final java.lang.String DESCRIPTOR = &quot;com.schaffer.base.DefineInterface&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public Stub() &#123;</span><br><span class="line">            this.attachInterface(this, DESCRIPTOR);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public static com.schaffer.base.DefineInterface asInterface(android.os.IBinder obj) &#123;</span><br><span class="line">            if ((obj == null)) &#123;</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">            android.os.IInterface iin = obj.queryLocalInterface(DESCRIPTOR);</span><br><span class="line">            if (((iin != null) &amp;&amp; (iin instanceof com.schaffer.base.DefineInterface))) &#123;</span><br><span class="line">                return ((com.schaffer.base.DefineInterface) iin);</span><br><span class="line">            &#125;</span><br><span class="line">            return new com.schaffer.base.DefineInterface.Stub.Proxy(obj);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public android.os.IBinder asBinder() &#123;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException &#123;</span><br><span class="line">            switch (code) &#123;</span><br><span class="line">                case INTERFACE_TRANSACTION: &#123;</span><br><span class="line">                    reply.writeString(DESCRIPTOR);</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">                case TRANSACTION_basicTypes: &#123;</span><br><span class="line">                    data.enforceInterface(DESCRIPTOR);</span><br><span class="line">                    int _arg0;</span><br><span class="line">                    _arg0 = data.readInt();</span><br><span class="line">                    long _arg1;</span><br><span class="line">                    _arg1 = data.readLong();</span><br><span class="line">                    boolean _arg2;</span><br><span class="line">                    _arg2 = (0 != data.readInt());</span><br><span class="line">                    float _arg3;</span><br><span class="line">                    _arg3 = data.readFloat();</span><br><span class="line">                    double _arg4;</span><br><span class="line">                    _arg4 = data.readDouble();</span><br><span class="line">                    java.lang.String _arg5;</span><br><span class="line">                    _arg5 = data.readString();</span><br><span class="line">                    this.basicTypes(_arg0, _arg1, _arg2, _arg3, _arg4, _arg5);</span><br><span class="line">                    reply.writeNoException();</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">                case TRANSACTION_myInterface: &#123;</span><br><span class="line">                    data.enforceInterface(DESCRIPTOR);</span><br><span class="line">                    com.schaffer.base.IMyAidlInterface _arg0;</span><br><span class="line">                    _arg0 = com.schaffer.base.IMyAidlInterface.Stub.asInterface(data.readStrongBinder());</span><br><span class="line">                    this.myInterface(_arg0);</span><br><span class="line">                    reply.writeNoException();</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">                case TRANSACTION_getList: &#123;</span><br><span class="line">                    data.enforceInterface(DESCRIPTOR);</span><br><span class="line">                    java.util.List&lt;com.schaffer.base.test.Book&gt; _result = this.getList();</span><br><span class="line">                    reply.writeNoException();</span><br><span class="line">                    reply.writeTypedList(_result);</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">                case TRANSACTION_setBinderDeath: &#123;</span><br><span class="line">                    data.enforceInterface(DESCRIPTOR);</span><br><span class="line">                    android.os.IBinder _arg0;</span><br><span class="line">                    _arg0 = data.readStrongBinder();</span><br><span class="line">                    this.setBinderDeath(_arg0);</span><br><span class="line">                    reply.writeNoException();</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return super.onTransact(code, data, reply, flags);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private static class Proxy implements com.schaffer.base.DefineInterface &#123;</span><br><span class="line">            private android.os.IBinder mRemote;</span><br><span class="line"></span><br><span class="line">            Proxy(android.os.IBinder remote) &#123;</span><br><span class="line">                mRemote = remote;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public android.os.IBinder asBinder() &#123;</span><br><span class="line">                return mRemote;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            public java.lang.String getInterfaceDescriptor() &#123;</span><br><span class="line">                return DESCRIPTOR;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, java.lang.String aString) throws android.os.RemoteException &#123;</span><br><span class="line">                android.os.Parcel _data = android.os.Parcel.obtain();</span><br><span class="line">                android.os.Parcel _reply = android.os.Parcel.obtain();</span><br><span class="line">                try &#123;</span><br><span class="line">                    _data.writeInterfaceToken(DESCRIPTOR);</span><br><span class="line">                    _data.writeInt(anInt);</span><br><span class="line">                    _data.writeLong(aLong);</span><br><span class="line">                    _data.writeInt(((aBoolean) ? (1) : (0)));</span><br><span class="line">                    _data.writeFloat(aFloat);</span><br><span class="line">                    _data.writeDouble(aDouble);</span><br><span class="line">                    _data.writeString(aString);</span><br><span class="line">                    mRemote.transact(Stub.TRANSACTION_basicTypes, _data, _reply, 0);</span><br><span class="line">                    _reply.readException();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    _reply.recycle();</span><br><span class="line">                    _data.recycle();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void myInterface(com.schaffer.base.IMyAidlInterface inter) throws android.os.RemoteException &#123;</span><br><span class="line">                android.os.Parcel _data = android.os.Parcel.obtain();</span><br><span class="line">                android.os.Parcel _reply = android.os.Parcel.obtain();</span><br><span class="line">                try &#123;</span><br><span class="line">                    _data.writeInterfaceToken(DESCRIPTOR);</span><br><span class="line">                    _data.writeStrongBinder((((inter != null)) ? (inter.asBinder()) : (null)));</span><br><span class="line">                    mRemote.transact(Stub.TRANSACTION_myInterface, _data, _reply, 0);</span><br><span class="line">                    _reply.readException();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    _reply.recycle();</span><br><span class="line">                    _data.recycle();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public java.util.List&lt;com.schaffer.base.test.Book&gt; getList() throws android.os.RemoteException &#123;</span><br><span class="line">                android.os.Parcel _data = android.os.Parcel.obtain();</span><br><span class="line">                android.os.Parcel _reply = android.os.Parcel.obtain();</span><br><span class="line">                java.util.List&lt;com.schaffer.base.test.Book&gt; _result;</span><br><span class="line">                try &#123;</span><br><span class="line">                    _data.writeInterfaceToken(DESCRIPTOR);</span><br><span class="line">                    mRemote.transact(Stub.TRANSACTION_getList, _data, _reply, 0);</span><br><span class="line">                    _reply.readException();</span><br><span class="line">                    _result = _reply.createTypedArrayList(com.schaffer.base.test.Book.CREATOR);</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    _reply.recycle();</span><br><span class="line">                    _data.recycle();</span><br><span class="line">                &#125;</span><br><span class="line">                return _result;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void setBinderDeath(android.os.IBinder binder) throws android.os.RemoteException &#123;</span><br><span class="line">                android.os.Parcel _data = android.os.Parcel.obtain();</span><br><span class="line">                android.os.Parcel _reply = android.os.Parcel.obtain();</span><br><span class="line">                try &#123;</span><br><span class="line">                    _data.writeInterfaceToken(DESCRIPTOR);</span><br><span class="line">                    _data.writeStrongBinder(binder);</span><br><span class="line">                    mRemote.transact(Stub.TRANSACTION_setBinderDeath, _data, _reply, 0);</span><br><span class="line">                    _reply.readException();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    _reply.recycle();</span><br><span class="line">                    _data.recycle();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        static final int TRANSACTION_basicTypes = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);</span><br><span class="line">        static final int TRANSACTION_myInterface = (android.os.IBinder.FIRST_CALL_TRANSACTION + 1);</span><br><span class="line">        static final int TRANSACTION_getList = (android.os.IBinder.FIRST_CALL_TRANSACTION + 2);</span><br><span class="line">        static final int TRANSACTION_setBinderDeath = (android.os.IBinder.FIRST_CALL_TRANSACTION + 3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, java.lang.String aString) throws android.os.RemoteException;</span><br><span class="line"></span><br><span class="line">    public void myInterface(com.schaffer.base.IMyAidlInterface inter) throws android.os.RemoteException;</span><br><span class="line"></span><br><span class="line">    public java.util.List&lt;com.schaffer.base.test.Book&gt; getList() throws android.os.RemoteException;</span><br><span class="line"></span><br><span class="line">    public void setBinderDeath(android.os.IBinder binder) throws android.os.RemoteException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Messenger-amp-Message"><a href="#Messenger-amp-Message" class="headerlink" title="Messenger &amp; Message"></a>Messenger &amp; Message</h3><p>底层实现为<code>AIDL</code>.<br><code>Messenger</code><strong>串行处理</strong>进程间通讯.<br><code>Messenger</code>中进行数据传递必须<strong>将数据放进<code>Message</code></strong>.<br><code>Messenger</code><strong>接收数据离不开<code>Handler</code>接收并处理</strong>.</p>
<p><strong>Message中可以用来传递数据的内容有:<code>what , arg1 , arg2 , object , data(Bundle) , replyTo .</code></strong></p>
<pre><code>object     : Android 2.2 之前不支持跨进程传输; Android 2.2 之后只支持跨进程传输 
             Parcelable 实现类;
Bundle     : 可以支持大量的数据类型;
replyTo    : 存储的是接收回复Message的Messenger信使;
</code></pre><hr>
<h3 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h3><p><a href="https://github.com/SchafferWang0818/SchafferBaseLibrary/blob/master/notes/Android%E4%B9%8B%E9%80%9A%E4%BF%A1%E2%80%94%E2%80%94Socket%E9%80%9A%E4%BF%A1.md" target="_blank" rel="noopener">点击这里查看socket通信</a></p>
<hr>
<h3 id="使用ContentProvider"><a href="#使用ContentProvider" class="headerlink" title="使用ContentProvider"></a>使用ContentProvider</h3><p><a href="https://github.com/SchafferWang0818/SchafferBaseLibrary/blob/master/notes/Android%E4%B9%8B%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E2%80%94%E2%80%94ContentProvider.md" target="_blank" rel="noopener"><font color="red"><strong>查看ContentProvider</strong></font></a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——其他数据库存储/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——其他数据库存储/" itemprop="url">Android之 其他数据库存储</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="其他数据库存储"><a href="#其他数据库存储" class="headerlink" title="其他数据库存储"></a>其他数据库存储</h1><h3 id="LitePal"><a href="#LitePal" class="headerlink" title="LitePal"></a>LitePal</h3><ol>
<li>参考: <ul>
<li><a href="http://blog.csdn.net/guolin_blog/article/details/38556989" target="_blank" rel="noopener">  Android数据库高手秘籍(二)——创建表和LitePal的基本用法 </a></li>
</ul>
</li>
</ol>
<hr>
<h3 id="DbFlow"><a href="#DbFlow" class="headerlink" title="DbFlow"></a>DbFlow</h3><ol>
<li>参考: <ul>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA5MzI3NjE2MA==&amp;mid=2650242234&amp;idx=1&amp;sn=e710a97e9425bcd4231026db4903f122&amp;chksm=88638dd5bf1404c3f09df3a1c906deb462b1fdce859b9b906255ecf66cc72cccdf85db6397b3&amp;scene=0#rd" target="_blank" rel="noopener"> 我所了解的Android数据库框架——DBFlow </a></li>
</ul>
</li>
</ol>
<hr>
<h3 id="Realm"><a href="#Realm" class="headerlink" title="Realm"></a>Realm</h3><ol>
<li>参考: <ul>
<li><a href="https://www.jianshu.com/p/28912c2f31db" target="_blank" rel="noopener"> Realm for Android详细教程 </a></li>
</ul>
</li>
</ol>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之存储——SharedPreferences/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之存储——SharedPreferences/" itemprop="url">Android之 SharedPreferences的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SharedPreferences的使用"><a href="#SharedPreferences的使用" class="headerlink" title="SharedPreferences的使用"></a>SharedPreferences的使用</h1><p>轻量级键值对存储形式.<strong>可以被其他应用读取/写入.</strong></p>
<pre><code>目录:
    1. 存储位置
    2. 存储状态
    3. 存储方式
</code></pre><hr>
<h3 id="1-存储位置"><a href="#1-存储位置" class="headerlink" title="1. 存储位置"></a>1. 存储位置</h3><p>所有的SP均存储到<strong><code>data/data/packageName/sharedPrefs/</code></strong>目录下.</p>
<hr>
<h3 id="2-存储状态"><a href="#2-存储状态" class="headerlink" title="2. 存储状态"></a>2. 存储状态</h3><p>所有存储的内容都是将键值对存储到xml文件中.</p>
<pre><code>&lt;?xml version=&apos;1.0&apos; encoding=&apos;utf-8&apos; standalone=&apos;yes&apos; ?&gt;  
&lt;map&gt;  
    &lt;string name=&quot;name&quot;&gt;Mr Lee&lt;/string&gt;  
    &lt;int name=&quot;age&quot; value=&quot;30&quot; /&gt;  
    &lt;boolean name=&quot;married&quot; value=&quot;true&quot; /&gt;  
    &lt;float name=&quot;weight&quot; value=&quot;100.0&quot; /&gt;  
&lt;/map&gt;  
</code></pre><ul>
<li><p>SP的存储和读写模式有以下几种:</p>
<ul>
<li><p>Context.MODE_PRIVATE</p>
<pre><code>默认的私有状态,覆盖原来的内容;
</code></pre></li>
<li><p>Context.MODE_APPEND</p>
<pre><code>在文件存在的情况下,追加到这个文件;
</code></pre></li>
<li><p>Context.MODE_WORLD _READABLE </p>
<pre><code>可以被其他应用读取;
</code></pre></li>
<li><p>Context.MODE_WORLD _WRITEABLE</p>
<pre><code>可以被其他应用写入;
</code></pre></li>
<li><p>Context.MODE_MULTI_PROCESS</p>
<pre><code>多进程,非多进程安全
</code></pre></li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-存储方式"><a href="#3-存储方式" class="headerlink" title="3. 存储方式"></a>3. 存储方式</h3><ol>
<li><p>存储</p>
<pre><code>SharedPreferences sps= getSharedPreferences(&quot;share&quot;, MODE_PRIVATE); 
SharedPreferences.Editor editor = sps.edit();  
editor.putString(&quot;name&quot;, &quot;Mr Lee&quot;);  
editor.putInt(&quot;age&quot;, 30);  
editor.putBoolean(&quot;married&quot;, true);  
editor.putFloat(&quot;weight&quot;, 100f);  
editor.commit();  
</code></pre></li>
</ol>
<ol>
<li><p>读取</p>
<pre><code>//读取其他app的sp
try {
    otherAppContext = createPackageContext(&quot;com.package.name&quot;, Context.CONTEXT_IGNORE_SECURITY);
} catch (PackageManager.NameNotFoundException e) {
            e.printStackTrace();
}
//根据Context取得对应的SharedPreferences
sp = otherAppContext.getSharedPreferences(&quot;share&quot;, Context.MODE_WORLD_READABLE);

//读取自己的app
SharedPreferences sps= getSharedPreferences(&quot;share&quot;, MODE_PRIVATE);    
String name = sps.getString(&quot;name&quot;, &quot;&quot;);  
int age = sps.getInt(&quot;age&quot;, 0);  
boolean married = sps.getBoolean(&quot;married&quot;, false);  
float weight = sps.getFloat(&quot;weight&quot;, 0);  
</code></pre></li>
</ol>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之多媒体——语音/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之多媒体——语音/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:39+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4"
                alt="SchafferWang" />
            
              <p class="site-author-name" itemprop="name">SchafferWang</p>
              <p class="site-description motion-element" itemprop="description">我要一步一步往上爬，<br>只待阳光静静看着它的脸，<br>小小的天有大大的梦想，<br>重重的壳裹着轻轻的仰望。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">89</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">79</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/SchafferWang0818" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/5055805571/profile?topnav=1&wvr=6" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-globe"></i>Weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/schaffer.me/activities" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-globe"></i>ZhiHu</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SchafferWang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
