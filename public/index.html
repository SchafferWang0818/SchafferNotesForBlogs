<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">
<meta property="og:type" content="website">
<meta property="og:title" content="SchafferWang&#39;s blogs">
<meta property="og:url" content="http://SchafferWang0818.github.io/index.html">
<meta property="og:site_name" content="SchafferWang&#39;s blogs">
<meta property="og:description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SchafferWang&#39;s blogs">
<meta name="twitter:description" content="我要一步一步往上爬，只待阳光静静看着它的脸，小小的天有大大的梦想，重重的壳裹着轻轻的仰望。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://SchafferWang0818.github.io/"/>





  <title>SchafferWang's blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SchafferWang's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Writed by SchafferWang</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/错误集锦及更正记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/错误集锦及更正记录/" itemprop="url">错误与崩溃集锦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="错误与崩溃集锦"><a href="#错误与崩溃集锦" class="headerlink" title="错误与崩溃集锦"></a>错误与崩溃集锦</h1><ol>
<li><p>错误1</p>
<pre><code>Error:A problem occurred configuring project &apos;:app&apos;.
&gt; Failed to notify project evaluation listener.
   &gt; Tinker does not support instant run mode, please trigger build by assembleHuaweiDebug or disable instant run in &apos;File-&gt;Settings...&apos;.
   &gt; can&apos;t find tinkerProcessHuaweiDebugManifest, you must init tinker plugin first!
</code></pre></li>
<li><p>改变build.gradle为”com.android.library”</p>
<pre><code>Error:Dependency fentu_android:zxingLibrary:unspecified on project app resolves to an APK archive which is not supported as a compilation dependency. 
File: D:\Workspace\fentu_android\zxingLibrary\build\outputs\apk\zxingLibrary-release-unsigned.apk
</code></pre></li>
<li><p>删除module中的applicationId</p>
<p> Error:Library projects cannot set applicationId. applicationId is set to ‘package_name’ in default config.</p>
</li>
<li><p>RecyclerView </p>
<ol>
<li>itemClickListener的getAdapterPosition = -1 导致的崩溃</li>
<li>数据源每一次更新必须notify,否则会报数据源不对应的错;</li>
</ol>
</li>
<li><p>Glide</p>
<ol>
<li><code>.asBitmap().dontAnimate()</code>不会造成第一次加载图片拉伸的问题.</li>
</ol>
</li>
</ol>
<ol>
<li><p>NavigationView DrawerLayout 配合使用,NavigationView 点击事件无效的问题</p>
<pre><code>需要将 NavigationView 作为第二个子View 时才能正常使用
</code></pre></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/代码规范&屏幕适配/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/代码规范&屏幕适配/" itemprop="url">代码规范&屏幕适配</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="代码规范-amp-屏幕适配"><a href="#代码规范-amp-屏幕适配" class="headerlink" title="代码规范&amp;屏幕适配"></a>代码规范&amp;屏幕适配</h1><hr>
<h2 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h2><pre><code>参考:http://www.jianshu.com/p/fbf9ea4b9d76#rd        
</code></pre><ol>
<li><p>包名全部小写,不使用下划线,</p>
<ol>
<li>主包名使用公司性质.公司名称.项目名称;</li>
<li><p>子包名使用通用名称的命名方式:</p>
<ol>
<li>util:工具类</li>
<li>main:activity及入口所在的包</li>
<li>view:自定义View</li>
<li>db:数据库操作</li>
<li>pref:首选项</li>
<li>provider:contentProvider</li>
<li>receiver:广播接收器</li>
<li>service:服务所在包</li>
</ol>
</li>
<li><p>导包不要使用”*”,使用具体的类包;</p>
</li>
<li>导入类,系统类在上,自定义类在下;</li>
</ol>
</li>
<li><p>代码:</p>
<ol>
<li>主要使用驼峰命名:每个单词的首字母大写;</li>
<li>类,接口,枚举等首字母大写;</li>
<li>父类名作为类名的后缀;</li>
<li>自定义异常Exception结尾;</li>
<li>for循环内部使用ijk,其他不允许;</li>
<li>数组名称使用复数;</li>
<li>常量枚举使用大写+下划线;</li>
<li>成员变量使用前缀m(member),静态变量使用前缀s(static);</li>
<li>控件变量添加组件前缀,并在所有者前缀之后;</li>
<li>除单例模式一般不使用静态变量;</li>
<li>常量使用 static final修饰;</li>
<li>构造方法的顺序根据参数多少使用递增方式;</li>
<li>项目内使用的实体类不使用javaBean封装,访问修饰符使用非private;</li>
<li>成员变量不可随意修改的内容使用下划线进行区分;</li>
<li>使用Log打印输出;</li>
<li>使用BuildConfig.DEBUG标记对Log进行封装，只在调试时输出重要信息，正式版不输出;</li>
<li>try.catch只捕获需要的异常,且catch的异常信息应该输出;</li>
</ol>
</li>
<li><p>res文件夹内容:</p>
<ol>
<li>资源命名使用小写+下划线;</li>
<li>常用的布局文件的前缀:activity,dialog,item,popup,window;</li>
<li>图片使用格式:<strong>性质前缀_ 功能模块_ 属性后缀.扩展名</strong>(属性后缀:pressed,disable,normal,checked,selector等.);</li>
<li>values目录下的文件名称:arrays,attrs,colors,dimens,drawables,strings,styles.</li>
</ol>
</li>
<li><p>注释:</p>
<ol>
<li>开源项目必要文件注释,非开源项目建议添加;/*…</li>
<li>类写类注释,接口写接口注释,变量常量添加属性注释,关联性大的可以使用一条注释.</li>
<li>public protected必须添加方法注释,其他建议添加注释,重写方法子类可以不写注释.</li>
<li>弃用的使用@Deprecated;</li>
<li>switch每一项添加说明;</li>
<li>if条件多于2个必须写注释;</li>
<li><strong>未完成的函数使用//TODO:…标记</strong></li>
<li><strong>有潜在问题的使用//XXX:…进行标记.</strong></li>
<li><strong>代码存在严重问题或用于调试,使用//FIXME:…标记,不能作为正式版发布;</strong></li>
<li>for,while过长使用标记</li>
</ol>
</li>
</ol>
<hr>
<h2 id="屏幕适配"><a href="#屏幕适配" class="headerlink" title="屏幕适配"></a>屏幕适配</h2><ol>
<li><p>屏幕尺寸:对角线长度,单位是英寸.1英寸=2.54厘米,</p>
<pre><code>常见的屏幕尺寸有2.4、2.8、3.5、3.7、4.2、5.0、5.5、6.0等;
</code></pre></li>
<li><p>分辨率:单位为px.1px = 1像素点.</p>
<pre><code>常用表示 1280(px)×720(px);
</code></pre></li>
<li><p>像素密度:每英寸有多少像素,单位dpi;</p>
<pre><code>计算方法如:开根(1280 * 1280+720 * 720)/屏幕尺寸;
</code></pre></li>
<li>单位比较:<ol>
<li>dp=dip(密度无关像素),以160dpi为基准，1dp=1px,320dpi下，1dp=2px;</li>
<li>dpi：屏幕像素密度的单位，“dot per inch”的缩写;</li>
<li>sp：Scale-Independent Pixels的缩写，可以根据文字大小首选项自动进行缩放。Google推荐我们使用12sp以上的大小，最好不要使用奇数和小数。</li>
</ol>
</li>
<li><p>尺寸比例</p>
<pre><code>mdpi：hdpi：xhdpi：xxhdpi：xxxhdpi=2：3：4：6：8;
</code></pre></li>
<li><p>支持屏幕尺寸的解决方案</p>
<ol>
<li>使用wrap_ content、math_ parent、weight;</li>
<li>使用相对布局，禁用绝对布局;</li>
<li><p>使用限定符.</p>
<ol>
<li>large:程序运行在屏幕尺寸大于7inch的设备上，系统就会加载<code>res/layout-large/activity_main.xml</code>，在小于7inch的设备上就会加载<code>res/layout/activity_main.xml</code>.<strong>适用于android3.2之前.</strong></li>
<li>最小宽度限定符<pre><code>`layout-sw600dp`文件夹(Small Width 最小宽度)
</code></pre></li>
<li><p>使用布局别名</p>
<pre><code>`res/layout/main.xml`: 单面板布局
`res/layout-large/main.xml`: 多面板布局
`res/layout-sw600dp/main.xml`: 多面板布局
</code></pre><p> 由于后两个文具文件一样，我们可以用以下两个文件代替上面三个布局文件：</p>
<pre><code>res/layout/main.xml单面板布局
res/layout/main_twopanes.xml双面板布局
</code></pre><p> 然后在res下建立</p>
<pre><code>`res/values/layout.xml`、
`res/values-large/layout.xml`、
`res/values-sw600dp/layout.xml`三个文件。
</code></pre><p> 默认布局<br> <code>res/values/layout.xml</code>:</p>
<pre><code>&lt;resources&gt;
  &lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main&lt;/item&gt;
&lt;/resources&gt;
</code></pre><p> Android3.2之前的平板布局<br> <code>res/values-large/layout.xml</code>:</p>
<pre><code>&lt;resources&gt;
  &lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;
</code></pre><p> Android3.2之后的平板布局<br> <code>res/values-sw600dp/layout.xml</code>:</p>
<pre><code>&lt;resources&gt;
  &lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;
</code></pre><p> 这样就有了main为别名的布局。<br> 在activity中<code>setContentView(R.layout.main)</code>;</p>
<p> 这样，程序在运行时，就会检测手机的屏幕大小，如果是平板设备就会加载<code>res/layout/main_twopanes.xml</code>，如果是手机设备，就会加载<code>res/layout/main.xml</code>。我们就解决了只使用一个布局文件来适配android3.2前后的所有平板设备。</p>
</li>
<li><p>屏幕方向限定符</p>
<p> 如果我们要求给横屏、竖屏显示的布局不一样。就可以使用屏幕方向限定符来实现。<br> 例如，要在平板上实现横竖屏显示不用的布局，可以用以下方式实现。<br> <code>res/values-sw600dp-land/layouts.xml</code>:横屏</p>
<pre><code>&lt;resources&gt;
  &lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main_twopanes&lt;/item&gt;
&lt;/resources&gt;
</code></pre><p> <code>res/values-sw600dp-port/layouts.xml</code>:竖屏</p>
<pre><code>&lt;resources&gt;
  &lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main&lt;/item&gt;
&lt;/resources&gt;
</code></pre></li>
<li>使用.9.png</li>
</ol>
</li>
</ol>
</li>
<li><p>支持屏幕密度的解决方案</p>
<pre><code>1. 将任何设备的手机密度像素分为320份*480份,当使用dp时使用对应的参数px即可
2. 使用备用位图,每个文件夹下放置符合比例的资源文件,系统自动加载,否则很大程度耗费内存;
</code></pre></li>
<li><p>不同布局可能导致不同的操作,应该对应不同的逻辑判断.</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——TCP,IP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——TCP,IP/" itemprop="url">Android之 OSI模型和TCP/IP模型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="OSI模型和TCP-IP模型"><a href="#OSI模型和TCP-IP模型" class="headerlink" title="OSI模型和TCP/IP模型"></a>OSI模型和TCP/IP模型</h2><ul>
<li>TCP/IP包含很多协议,被认为是TCP/IP协议簇.</li>
<li><p>OSI七层模型:<strong>P</strong>lease <strong>d</strong>o <strong>n</strong>ot <strong>t</strong>ell <strong>s</strong>tupid <strong>p</strong>eople <strong>a</strong>nything.</p>
<pre><code>===================================================================
网络接口:
                                        *  物理层(Physical)
                                        *  数链层(DataLink)            
===================================================================
网络层:
                                        *  网络层(Network)
===================================================================
传输层:
                                        *  传输层(Transport)
===================================================================
应用层:
                                        *  表示层(Session)
                                        *  会话层(Presentation)
                                        *  应用层(Application)
===================================================================
</code></pre></li>
</ul>
<ol>
<li>物理层：主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是<strong>传输比特流</strong>（就是由1、0转化为电流强弱来进行传输,到达目的地后在转化为1、0，也就是我们常说的<strong>数模转换与模数转换</strong>）。这一层的数据叫做比特。
　　</li>
<li><p>数据链路层：定义了<strong>格式化数据如何传输(定义在单个链路上如何传输数据)</strong>，以及如何<strong>控制对物理介质的访问</strong>。这一层通常还提供<strong>错误检测和纠正</strong>，以确保数据的可靠传输。 　</p>
</li>
<li><p>网络层：为在位于不同地理位置的网络中的<strong>两个主机系统之间提供连接和路径选择</strong>。
　　</p>
</li>
<li>传输层：定义了一些传输数据的协议和端口号（WWW端口80等），如：TCP（传输控制协议，传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据），UDP（用户数据报协议，与TCP特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如QQ聊天数据就是通过这种方式传输的）。 主要是<strong>将从下层接收的数据进行分段和传输，到达目的地址后再进行重组。</strong>常常把这一层数据叫做段。 
　　</li>
<li>会话层：通过传输层（端口号：传输端口与接收端口）<strong>建立数据传输的通路</strong>。主要在你的系统之间发起会话或者接受会话请求（设备之间需要互相认识可以是IP也可以是MAC或者是主机名） 　　</li>
</ol>
<ol>
<li>表示层：可确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取。例如，PC程序与另一台计算机进行通信，其中一台计算机使用扩展二一十进制交换码（EBCDIC），而另一台则使用美国信息交换标准码（ASCII）来表示相同的字符。如有必要，表示层会通过使用一种通格式来<strong>实现多种数据格式之间的转换。</strong> 　
　</li>
<li>应用层： 是最靠近用户的OSI层。这一层<strong>为用户的应用程序（例如电子邮件、文件传输和终端仿真）提供网络服务。</strong></li>
</ol>
<hr>
<h2 id="TCP连接"><a href="#TCP连接" class="headerlink" title="TCP连接"></a>TCP连接</h2><ul>
<li>手机底层实现了TCP/IP协议，可以使手机终端通过无线网络建立TCP连接。TCP协议可以对上层网络提供接口，使上层网络数据的传输建立在“无差别”的网络之上。</li>
<li><p>连接需要三次握手</p>
<pre><code>1. 客户端发送syn包(syn=j)到服务器，并进入SYN_SEND状态，等待服务器确认；
2. 服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；
3. 客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=k+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。

* 注:握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。理想状态下，TCP连接一旦建立，在通信双方中的任何一方主动关闭连接之前，TCP 连接都将被一直保持下去
</code></pre></li>
<li><p>断开连接需要四次握手</p>
</li>
</ul>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——HTTP,HTTPS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——HTTP,HTTPS/" itemprop="url">Android之 HTTP/HTTPS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTTP-HTTPS-基础与版本"><a href="#HTTP-HTTPS-基础与版本" class="headerlink" title="HTTP/HTTPS 基础与版本"></a>HTTP/HTTPS 基础与版本</h1><hr>
<pre><code>目录:
    - http
        - 原理
        - 结构
        - 请求报文格式
        - 答复报文格式
        - 状态码
        - 版本
    - http与https的区别
    - https
        - 优点
        - 加密
</code></pre><hr>
<h3 id="HTTP-HyperText-Transport-Protocol"><a href="#HTTP-HyperText-Transport-Protocol" class="headerlink" title="HTTP(HyperText Transport Protocol)"></a>HTTP(HyperText Transport Protocol)</h3><pre><code>超文本(超过计算机处理文本信息的方法)传输协议,最初为了提供发布和接收html页面的方法,运行在TCP/IP协议簇之上;
服务器=html+http驻留程序(用于响应用户请求)
</code></pre><ol>
<li>1.0处理完请求之后就会释放连接;</li>
<li>1.1请求可以多次重叠;</li>
<li>客户端固定时间段向服务器发送保持连接请求,服务器收到请求后回复确认客户端在线;当长时间没有收到请求,则认为网络已经断开.</li>
</ol>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><ol>
<li><p><strong>首先客户机与服务器需要建立连接。只要单击某个超级链接，HTTP的工作就开始了。</strong></p>
</li>
<li><p><strong>建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是MIME信息包括请求修饰符、客户机信息和可能的内容。</strong></p>
</li>
<li><p><strong>服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后边是MIME信息包括服务器信息、实体信息和可能的内容。</strong></p>
</li>
<li><p><strong>客户端接收服务器所返回的信息通过浏览器显示在用户的显示屏上，然后客户机与服务器断开连接。</strong></p>
</li>
</ol>
<h4 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h4><pre><code>- 模型: 请求/响应模型.
- 请求头包含:
    - 请求的方法
    - URL
    - 协议版本
    - 类似于MIME的消息结构
        - 请求修饰符
        - 客户信息
        - 内容
- 响应包含:
    - 消息协议的版本
    - 成功/错误编码
    - 包含服务器信息、实体元信息以及可能的实体内容。
- 请求/响应内容包括:
    - 一个起始行
    - 一个或者多个头域
        - 通用头
        - 请求头
        - 响应头
        - 实体头
    - 一个指示头域结束的空行
    - 可选的消息体
</code></pre><h4 id="请求报文格式"><a href="#请求报文格式" class="headerlink" title="请求报文格式"></a>请求报文格式</h4><pre><code>请求行 － 通用信息头 － 请求头 － 实体头 － 报文主体

请求行以方法字段开始，后面分别是 URL 字段和 HTTP 协议版本字段，并以 CRLF 结尾。
SP 是分隔符。除了在最后的 CRLF 序列中 CF 和 LF 是必需的之外，其他都可以不要。
有关通用信息头，请求头和实体头方面的具体内容可以参照相关文件。
</code></pre><h4 id="应答报文格式"><a href="#应答报文格式" class="headerlink" title="应答报文格式"></a>应答报文格式</h4><pre><code>状态行 － 通用信息头 － 响应头 － 实体头 － 报文主体

状态码元由3位数字组成，表示请求是否被理解或被满足。原因分析是对原文的状态码作简短的描述，
状态码用来支持自动操作，而原因分析用来供用户使用。客户机无需用来检查或显示语法。
有关通用信息头，响应头和实体头方面的具体内容可以参照相关文件。
</code></pre><h4 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h4><pre><code>1xx: 信息响应类，表示接收到请求并且继续处理
2xx: 处理成功响应类，表示动作被成功接收、理解和接受
3xx: 重定向响应类，为了完成指定的动作，必须接受进一步处理
4xx: 客户端错误，客户请求包含语法错误或者是不能正确执行
5xx: 服务端错误，服务器不能正确执行一个正确的请求
</code></pre><h4 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h4><pre><code>HTTP/0.9　已过时。只接受 GET 一种请求方法，没有在通讯中指定版本号，且不支持请求头。
        由于该版本不支持 POST 方法，所以客户端无法向服务器传递太多信息。
HTTP/1.0　这是第一个在通讯中指定版本号的HTTP 协议版本，至今仍被广泛采用，特别是在代理服务器中。
HTTP/1.1　当前版本。持久连接被默认采用，并能很好地配合代理服务器工作。
        还支持以管道方式同时发送多个请求，以便降低线路负载，提高传输速度。
</code></pre><hr>
<h3 id="HTTPS-与-HTTP-的区别"><a href="#HTTPS-与-HTTP-的区别" class="headerlink" title="HTTPS 与 HTTP 的区别"></a>HTTPS 与 HTTP 的区别</h3><ul>
<li>证书: HTTPS有需要缴费的<strong>ca证书</strong>；</li>
<li>端口: HTTPS使用<strong>443端口</strong>,HTTP使用80端口；</li>
<li>安全: HTTPS有作为<strong>应用层子层的,加密传输,身份认证</strong>的SSL层;HTTP是位于传输层，明文传输，无状态无记忆能力的连接；</li>
</ul>
<hr>
<h3 id="HTTPS-Hyper-Text-Transfer-Protocol-over-Secure-Socket-Layer"><a href="#HTTPS-Hyper-Text-Transfer-Protocol-over-Secure-Socket-Layer" class="headerlink" title="HTTPS(Hyper Text Transfer Protocol over Secure Socket Layer)"></a>HTTPS(Hyper Text Transfer Protocol over Secure Socket Layer)</h3><pre><code>加入SSL层,以安全为目标的HTTP通道。

以安全为目标的HTTP通道,添加的内容是SSl完全套接字层,主要进行详细内容的加密,Https存在不同于Http的默认端口,在Http和TCP之间还有加密/身份证明层,本来用于身份证明和加密通讯方法.

　　客户端在使用HTTPS方式与Web服务器通信时有以下几个步骤，如图所示。

        （1）客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。

        （2）Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。

        （3）客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。

        （4）客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。

        （5）Web服务器利用自己的私钥解密出会话密钥。

        （6）Web服务器利用会话密钥加密与客户端之间的通信。
</code></pre><h4 id="SSL层原理"><a href="#SSL层原理" class="headerlink" title="SSL层原理"></a>SSL层原理</h4><ol>
<li><p>SSL 协议既用到了<font color="red"><strong>公钥加密技术</strong></font>又用到了<font color="red"><strong>对称加密技术</strong></font>，对称加密技术虽然比公钥加密技术的速度快，可是公钥加密技术提供了更好的身份认证技术。</p>
</li>
<li><p>分为两层:</p>
<ul>
<li>SSL记录协议（SSL Record Protocol）：它建立在可靠的传输协议（如TCP）之上，为高层协议提供<font color="red"><strong>数据封装、压缩、加密</strong></font>等基本功能的支持。</li>
<li>SSL握手协议（SSL Handshake Protocol）：它建立在SSL记录协议之上，用于<font color="red">在实际的数据传输开始前，通讯双方进行身份认证、协商加密算法、交换加密密钥等。</font></li>
</ul>
</li>
<li><p>工作流程</p>
<ol>
<li>客户端Client: 向服务器发送一个开始信息“Hello”以便开始一个新的会话连接；</li>
<li>服务器Server: 根据客户的信息确定是否需要生成新的主密钥，如需要则服务器在响应客户的“Hello”信息时将包含生成主密钥所需的信息；</li>
<li>客户端Client: 根据收到的服务器响应信息，产生一个主密钥，并用服务器的公开密钥加密后传给服务器；</li>
<li>服务器Server: 恢复该主密钥，并返回给客户一个用主密钥认证的信息，以此让客户认证服务器。</li>
</ol>
</li>
</ol>
<pre><code>注:在此之前，服务器已经通过了客户认证，这一阶段主要完成对客户的认证。
经认证的服务器发送一个提问给客户，客户则返回（数字）签名后的提问和其公开密钥，
从而向服务器提供认证。
</code></pre><h4 id="握手过程"><a href="#握手过程" class="headerlink" title="握手过程"></a>握手过程</h4><p>为了便于更好的认识和理解SSL 协议，这里着重介绍SSL 协议的握手协议。SSL 协议既用到了公钥加密技术又用到了对称加密技术，对称加密技术虽然比公钥加密技术的速度快，可是公钥加密技术提供了更好的身份认证技术。SSL 的握手协议非常有效的让客户和服务器之间完成相互之间的身份认证，其主要过程如下：</p>
<pre><code>1. 客户端的浏览器向服务器传送客户端SSL 协议的版本号，加密算法的种类，产生的随机数，
    以及其他服务器和客户端之间通讯所需要的各种信息。

2. 服务器向客户端传送SSL 协议的版本号，加密算法的种类，随机数以及其他相关信息，
    同时服务器还将向客户端传送自己的证书。

3. 客户利用服务器传过来的信息验证服务器的合法性，服务器的合法性包括：证书是否过期，
发行服务器证书的CA 是否可靠，发行者证书的公钥能否正确解开服务器证书的“发行者的数字签名”，
服务器证书上的域名是否和服务器的实际域名相匹配。如果合法性验证没有通过，通讯将断开；
如果合法性验证通过，将继续进行第四步。

4. 用户端随机产生一个用于后面通讯的“对称密码”，然后用服务器的公钥（服务器的公钥从步骤②中的
服务器的证书中获得）对其加密，然后将加密后的“预主密码”传给服务器。

5. 如果服务器要求客户的身份认证（在握手过程中为可选），用户可以建立一个随机数然后对其进行数据签名，
将这个含有签名的随机数和客户自己的证书以及加密过的“预主密码”一起传给服务器。

6. 如果服务器要求客户的身份认证，服务器必须检验客户证书和签名随机数的合法性，具体的合法性验证过程包括：
客户的证书使用日期是否有效，为客户提供证书的CA 是否可靠，发行CA 的公钥能否正确解开客户证书
的发行CA 的数字签名，检查客户的证书是否在证书废止列表（CRL）中。检验如果没有通过，
通讯立刻中断；如果验证通过，服务器将用自己的私钥解开加密的“预主密码”，
然后执行一系列步骤来产生主通讯密码（客户端也将通过同样的方法产生相同的主通讯密码）。

7. 服务器和客户端用相同的主密码即“通话密码”，一个对称密钥用于SSL协议的安全数据通讯的
加解密通讯。同时在SSL 通讯过程中还要完成数据通讯的完整性，防止数据通讯中的任何变化。

8. 客户端向服务器端发出信息，指明后面的数据通讯将使用的步骤⑦中的主密码为对称密钥，
同时通知服务器客户端的握手过程结束。

9. 服务器向客户端发出信息，指明后面的数据通讯将使用的步骤⑦中的主密码为对称密钥，
同时通知客户端服务器端的握手过程结束。

10. SSL 的握手部分结束，SSL 安全通道的数据通讯开始，客户和服务器开始使用相同的对称密钥
进行数据通讯，同时进行通讯完整性的检验。
</code></pre><hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——UDP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——UDP/" itemprop="url">Android之 TCP/UDP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="TCP-UDP"><a href="#TCP-UDP" class="headerlink" title="TCP/UDP"></a>TCP/UDP</h2><p>TCP (Transmission Control Protocol)和UDP(User Datagram Protocol)协议属于传输层协议。</p>
<ul>
<li>TCP提供IP环境下的数据可靠传输，它提供的服务包括数据流传送、可靠性、有效流控、全双工操作和多路复用。通过面向连接、端到端和可靠的数据包发送。通俗说，它是事先为所发送的数据开辟出连接好的通道，然后再进行数据发送；<ul>
<li>TCP支持的应用协议主要有：Telnet、FTP、SMTP等；</li>
</ul>
</li>
<li>而UDP则不为IP提供可靠性、流控或差错恢复功能。一般来说，TCP对应的是可靠性要求高的应用，而UDP对应的则是可靠性要求低、传输经济的应用。<ul>
<li>UDP支持的应用层协议主要有：NFS（网络文件系统）、SNMP（简单网络管理协议）、DNS（主域名称系统）、TFTP（通用文件传输协议）等。</li>
</ul>
</li>
</ul>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>TCP协议能为应用程序提供可靠的通信连接，使一台计算机发出的字节流无差错地发往网络上的其他计算机，对可靠性要求高.</p>
<ol>
<li>面向连接,计算机接收数据包的同时还要向其他计算机回发数据包.</li>
</ol>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>UDP面向非连接,不必先建立连接就可以直接发送.UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——Socket通信/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——Socket通信/" itemprop="url">Android之 Socket</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android-总结/" itemprop="url" rel="index">
                    <span itemprop="name">android 总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Socket及其通信"><a href="#Socket及其通信" class="headerlink" title="Socket及其通信"></a>Socket及其通信</h2><ul>
<li>套接字,支持TCP/IP协议网络通信的基本单元.是网络通信过程<strong>端点</strong>的抽象.</li>
<li>包含两个IP,两个协议端口,一个协议;</li>
<li>Socket接口的作用:区分不同的应用和连接,实现数据传输的并发服务.</li>
<li><p><strong>套接字连接过程:</strong></p>
<pre><code>1. 服务器端不知道客户端的套接字,处于等待请求状态;
2. 客户端套接字提出请求,以连接服务器端的套接字,描述IP和端口来连接确定;
3. 服务器端检测到请求之后开启线程发出自身的套接字描述,客户端确认之后建立连接.
4. 服务器端继续监听等待状态来接收其他请求.
</code></pre></li>
</ul>
<hr>
<h3 id="Socket-TCP-UDP通讯示例"><a href="#Socket-TCP-UDP通讯示例" class="headerlink" title="Socket TCP/UDP通讯示例"></a><a href="https://www.cnblogs.com/zhujiabin/p/5675716.html" target="_blank" rel="noopener">Socket TCP/UDP通讯示例</a></h3><p><strong>TCP使用的是流的方式发送，UDP是以包的形式发送。</strong></p>
<hr>
<h2 id="Socket-客户端最简单的TCP通信示例"><a href="#Socket-客户端最简单的TCP通信示例" class="headerlink" title="Socket 客户端最简单的TCP通信示例"></a>Socket 客户端最简单的TCP通信示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSocketCreateActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connect(<span class="string">"192.168.1.24"</span>,<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//socket</span></span><br><span class="line">    <span class="keyword">private</span> Socket mSocket;</span><br><span class="line">    <span class="comment">//线程池</span></span><br><span class="line">    <span class="keyword">private</span> ExecutorService mPool;</span><br><span class="line">    <span class="comment">//发送信息时的输出流</span></span><br><span class="line">    <span class="keyword">private</span> OutputStream mOutputStream;</span><br><span class="line">    <span class="comment">//得到消息的输入留</span></span><br><span class="line">    <span class="keyword">private</span> InputStream mInputStream;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connect</span><span class="params">(String host, <span class="keyword">int</span> port)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mSocket == <span class="keyword">null</span>) &#123;</span><br><span class="line">            mSocket = <span class="keyword">new</span> Socket(host, port);</span><br><span class="line">            mPool = Executors.newCachedThreadPool();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mSocket.isConnected();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要在子线程进行</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">socketMessage</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mSocket != <span class="keyword">null</span> &amp;&amp; mSocket.isConnected()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mInputStream == <span class="keyword">null</span>) &#123;</span><br><span class="line">                mInputStream = mSocket.getInputStream();</span><br><span class="line">            &#125;</span><br><span class="line">            BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(mInputStream));</span><br><span class="line"></span><br><span class="line">            String s = reader.readLine();</span><br><span class="line">            reader.close();</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Log.d(<span class="string">"TAG"</span>,<span class="string">"mSocket==null or !mSocket.isConnected()"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要在子线程进行</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String message)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mSocket != <span class="keyword">null</span> &amp;&amp; mSocket.isConnected()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mOutputStream == <span class="keyword">null</span>) &#123;</span><br><span class="line">                mOutputStream = mSocket.getOutputStream();</span><br><span class="line">            &#125;</span><br><span class="line">            mOutputStream.write(message.getBytes());</span><br><span class="line">            mOutputStream.flush();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Log.d(<span class="string">"TAG"</span>,<span class="string">"mSocket==null or !mSocket.isConnected()"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mSocket != <span class="keyword">null</span> &amp;&amp; mSocket.isConnected()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mInputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">                mInputStream.close();</span><br><span class="line">                mInputStream = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (mOutputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">                mOutputStream.close();</span><br><span class="line">                mOutputStream = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            mSocket.close();</span><br><span class="line">            mSocket = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mPool.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    String s = socketMessage();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mPool.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    sendMessage(<span class="string">"这是发送给服务器的消息"</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——网络框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——网络框架/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——断续上传/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——断续上传/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之辅助——插件及操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之辅助——插件及操作/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://SchafferWang0818.github.io/2018/03/21/Android之通信——文件下载/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SchafferWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SchafferWang's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/21/Android之通信——文件下载/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-21T13:35:40+08:00">
                2018-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://b107.photo.store.qq.com/psb?/V13TTKNS3RSxL2/w9lSgrOJ.PUBfNGq5Og3KsXpTRlFWY*M0I168fsA4us!/b/dGsAAAAAAAAA&bo=VgOAAgAAAAAFB*M!&rf=viewer_4"
                alt="SchafferWang" />
            
              <p class="site-author-name" itemprop="name">SchafferWang</p>
              <p class="site-description motion-element" itemprop="description">我要一步一步往上爬，<br>只待阳光静静看着它的脸，<br>小小的天有大大的梦想，<br>重重的壳裹着轻轻的仰望。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">89</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">79</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/SchafferWang0818" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/5055805571/profile?topnav=1&wvr=6" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-globe"></i>Weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/schaffer.me/activities" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-globe"></i>ZhiHu</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SchafferWang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
